webpackJsonp_name_([3],{60:function(e,t,n){var a=n(68);'string'==typeof a&&(a=[[e.i,a,'']]);var o,r={hmr:!0};r.transform=o,r.insertInto=void 0;n(9)(a,r);a.locals&&(e.exports=a.locals),!1},68:function(e,t,n){t=e.exports=n(8)(!1),t.push([e.i,'#contentIframe.hideContent{visibility:hidden}.viewer-body .vega-pxe-frame{position:absolute;border:0 solid #ffffff;width:100%;top:0;left:0;bottom:0;height:100%;margin-bottom:0}.viewer-body .vega-pxe-frame-print-page{height:calc(100vh - 117px)}.ReactModalPortalAnimated .viewer-body .vega-pxe-frame{top:77px;height:88%}\n',''])},72:function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=n(0),o=n.n(a),r=n(1),i=n.n(r),l=n(5),s=n.n(l),d=n(11),c=n.n(d),p=n(2),m=n.n(p),g=n(7),u=n.n(g),h=n(49),f=n.n(h),b=n(50),y=n.n(b),C=n(51),v=n.n(C),E=n(52),P=n.n(E),x=n(4),w=n(3),I=n(43),T=n.n(I),A=n(47),k=n.n(A),S=n(48),L=n.n(S),N=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var F=(e)=>Object(a.createElement)(L.a,N({width:'16',height:'16',viewBox:'0 0 16 16',fill:'none',className:'post-indicator-button'},e),Object(a.createElement)('path',{fillRule:'evenodd',clipRule:'evenodd',d:'M14 0.666687C15.1046 0.666687 16 1.56212 16 2.66669V10C16 11.1046 15.1046 12 14 12H8.367L5.17453 15.7542C4.93602 16.0347 4.51528 16.0687 4.23479 15.8302C4.08584 15.7035 4 15.5179 4 15.3223V12H2C0.895431 12 0 11.1046 0 10V2.66669C0 1.56212 0.895431 0.666687 2 0.666687H14ZM14 2.00002H2C1.63181 2.00002 1.33333 2.2985 1.33333 2.66669V10C1.33333 10.3682 1.63181 10.6667 2 10.6667H5.33333V13.5093L7.75059 10.6667H14C14.3682 10.6667 14.6667 10.3682 14.6667 10V2.66669C14.6667 2.2985 14.3682 2.00002 14 2.00002Z',fill:'currentColor',className:'post-indicator-button'})),B=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var O=(e)=>Object(a.createElement)(L.a,B({width:'16',height:'16',viewBox:'0 0 16 16',fill:'none'},e),Object(a.createElement)('path',{fillRule:'evenodd',clipRule:'evenodd',d:'M14 0.666656C15.1046 0.666656 16 1.56209 16 2.66666V9.99999C16 11.1046 15.1046 12 14 12H8.367L5.17453 15.7542C4.93602 16.0347 4.51528 16.0687 4.23479 15.8302C4.08584 15.7035 4 15.5178 4 15.3223V12H2C0.895431 12 0 11.1046 0 9.99999V2.66666C0 1.56209 0.895431 0.666656 2 0.666656H14Z',fill:'#F7F9FD'})),D=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},W=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(e){o=!0,r=e}finally{try{!a&&l['return']&&l['return']()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();const M={position:'relative',width:32,height:48,textAlign:'center',display:'inline-flex',justifyContent:'center',flexDirection:'column'},R={background:'#E8EEFA',borderRadius:22},H={background:'#FFFDF3',borderRadius:22,border:'1px solid rgba(155, 161, 173, 0.25)'},V={background:'#2A2A2E',borderRadius:22,border:'1px solid #4F5561',color:'#F7F9FD'},q={background:'linear-gradient(135deg, #EE512E 0%, #DF006B 63.44%, #BD0071 100%)',border:'none',borderRadius:22,color:'#FEFEFE'},U={background:'#6D0176',border:'none',borderRadius:22,color:'#FEFEFE'},j=({count:e,handlePostIconClick:t,isLastIcon:n,link:o,paraIdentifier:r,selectedParaId:i,targetPara:l,targetElement:d,theme:c,top:p})=>{var m=Object(a.useState)(!1),g=W(m,2);const u=g[0],h=g[1];var f=Object(a.useState)(p),b=W(f,2);const y=b[0],C=b[1];var v=Object(a.useState)((i||'').toLowerCase()===r.toLowerCase()),E=W(v,2);const P=E[0],w=E[1],I=Object(a.useCallback)(()=>'sepia'===c?U:q,[c]),T=Object(a.useCallback)(()=>u?'sepia'===c?H:'dark'===c?V:R:{},[u,c]),k=Object(a.useRef)(),S=(e)=>{if(e.target&&e.target.classList&&e.target.classList.contains('post-indicator-button')){const t=e.target.getBoundingClientRect(),n={type:e.type,interactionPoint:{top:t.bottom,left:t.left}};s.a.publish(x.l,n)}};Object(a.useEffect)(()=>{const e=new ResizeObserver((e)=>{const t=e[0],n=t.target,a=d.body,o=d.documentElement,r=window.pageYOffset||o.scrollTop||a.scrollTop,i=n.getBoundingClientRect().bottom+r-d.body.clientTop-x.k;C(i)});e.observe(l);const t=s.a.on('selectedParaId',(e)=>{e.paraIdentifier.toLowerCase()===r.toLowerCase()?w(!0):w(!1)});return k.current.addEventListener('mouseover',S,!1),k.current.addEventListener('mouseout',S,!1),n&&setTimeout(()=>s.a.publish('postIconsLoaded'),300),()=>{e.unobserve(l),t(),k.current&&(k.current.removeEventListener('mouseover',S,!1),k.current.removeEventListener('mouseout',S,!1))}},[]),Object(a.useEffect)(()=>{P&&s.a.publish(x.m)},[P]);const L=document.getElementById('contentIframe'),N=L&&L.contentWindow.matchMedia('screen and (min-width: 920px)')||{};return Object(a.createElement)('span',{style:{position:'absolute',right:`${N.matches?'60px':'20px'}`,top:`${y-14}px`}},Object(a.createElement)('span',{style:D({},'dark'===c?{color:'#F7F9FD'}:{color:'inherit'},M,P?I():T())},Object(a.createElement)('p',{style:{fontFamily:'Hind',fontSize:12,textAlign:'center',margin:0,lineHeight:'normal',minHeight:14,marginTop:4},ref:(e)=>{e&&e.style.setProperty('color','inherit','important')}},e||''),Object(a.createElement)(A.IconButton,{"aria-label":'Post',ref:k,className:'post-indicator-button',style:P?{background:'none',border:'none',color:'inherit',padding:'4px 0px 0px 0px',margin:0,display:'flex',alignSelf:'center'}:{background:'none',border:'none',color:'inherit',padding:0,margin:0},color:'inherit',onClick:()=>{t(r,o),h(!1)},onMouseOver:()=>h(!0),onMouseOut:()=>h(!1)},P?Object(a.createElement)(O,null):Object(a.createElement)(F,null))))};j.propTypes={count:i.a.oneOfType([i.a.string,i.a.number]),handlePostIconClick:i.a.func,isLastIcon:i.a.bool,link:i.a.object,paraIdentifier:i.a.string,selectedParaId:i.a.oneOf([i.a.bool,i.a.string]),targetElement:i.a.node,targetPara:i.a.node,theme:i.a.string.isRequired,top:i.a.number},j.defaultProps={count:0,handlePostIconClick:()=>{},isLastIcon:!1,link:{},paraIdentifier:'',selectedParaId:!1,targetElement:null,targetPara:null,top:0};class _ extends o.a.Component{constructor(e){super(e),this.targetElement=e.targetElement;const t=this.targetElement.createElement('div');t.id='contentIndicator',this.el=t}componentDidMount(){this.targetElement.body.appendChild(this.el)}componentWillUnmount(){this.targetElement.body.removeChild(this.el)}render(){var e=this.props;const t=e.contentIdicatorData,n=e.handlePostIconClick,o=e.selectedParaId,r=e.theme,i=this.targetElement.body,l=this.targetElement.documentElement,s=window.pageYOffset||l.scrollTop||i.scrollTop,d=t.length-1;return T.a.createPortal(t.map((e,t)=>Object(a.createElement)(j,{count:e.count,handlePostIconClick:n,key:t,isLastIcon:t===d,link:e.link,paraIdentifier:e.paraIdentifier,selectedParaId:o,targetElement:this.targetElement,targetPara:e.ele,theme:r,top:e.position.bottom+s-this.targetElement.body.clientTop-x.k})),this.el)}}_.propTypes={contentIdicatorData:i.a.arrayOf(i.a.object),handlePostIconClick:i.a.func,selectedParaId:i.a.oneOf([i.a.bool,i.a.string]),targetElement:i.a.node,theme:i.a.string},_.defaultProps={contentIdicatorData:[],handlePostIconClick:()=>{},selectedParaId:!1,targetElement:null,theme:''};class z{}Object.defineProperty(z,'getParser',{enumerable:!0,writable:!0,value:(e,t)=>{const n=['socialexplorer','geogebra','metrodigi','smartsparrow','wonda','mapmaster','graphits','usolver','physioex','knowdl','discussionspa','pearsoncanadainline'];return t&&n.push('unitytiny'),e&&-1<n.indexOf(e.toLowerCase())?'3pise':null}});class K{static getInstance(){return new K}constructor(){this.parserRegistry={},this.tileView=!1}setLearningContext(e){this.learningContext=e}setThemeContext(e){this.themeContext=e}setTileView(e){this.tileView=e}setPopoverInteraction(e){this.popoverInteraction=e}setChildContext(e){this.childContext={learnosity:e.learnosity,eventHandler:e.eventHandler,getDiscussionQueryParameters:e.getDiscussionQueryParameters,endpoint:e.endpoint}}register(e){this.parserRegistry[e.getType()]=e}getParser(e){const t=e.getElementsByClassName('pearson-component')[0];if(!t||t.getAttribute('rendered'))return null;var n=this.learningContext.features;const a=n.immersiveMode,o=n.enableInlineInteractives,r=n.disableEmbeddedAssessments,i=t.getAttribute('data-type');if(i&&-1!==i.toLowerCase().indexOf('assessment')&&r)return t.parentNode&&(t.parentNode.style.display='none'),null;let l=null,s=z.getParser(t.getAttribute('data-vendor'),a);if(s?(l=this.parserRegistry[s],l&&o&&t.classList.add('inline')):(s=i,l=this.parserRegistry[s]),!l)return null;const d=Object.assign(Object.create(Object.getPrototypeOf(l)),l);return d.init({figure:e,componentElement:t,learningContext:this.learningContext,tileView:this.tileView,theme:this.themeContext,popoverInteraction:this.popoverInteraction,childContext:this.childContext}),d}getParserByType(e){return this.parserRegistry[e]}}var X=K.getInstance(),Y=n(53),G=n.n(Y),Z=n(10),Q=n.n(Z),$=n(54),J=n.n($),ee=n(13),te=n(6),ne=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};let ae=0;const oe=(e)=>(t)=>Object(a.createElement)(ee.a,e,t);class re{constructor(e){Object.defineProperty(this,'handlePlayingWidgets',{enumerable:!0,writable:!0,value:(t)=>{const e=t.keyCode?t.keyCode:t.which,n=13===e||'click'===t.type;return!n}}),Object.defineProperty(this,'getNavXmldata',{enumerable:!0,writable:!0,value:(e)=>{let t=new XMLHttpRequest;return t.open('GET',e,!1),t.send(null),200===t.status?t.response&&t.response.replace(/\\n/g,'').replace(/\s\s+/g,' '):t}}),Object.defineProperty(this,'isMathMlPreviewNode',{enumerable:!0,writable:!0,value:(e,t)=>'span'===t&&e.getAttribute('class')&&'MathJax_Preview'===e.getAttribute('class')}),Object.defineProperty(this,'getId',{enumerable:!0,writable:!0,value:(e)=>e.getAttribute('data-contenturn')||e.getAttribute('resource')||''}),this.type=e}init(e){this.elements=e}getType(){return this.type}getBooleanFeatureParams(e){return this.elements&&this.elements.learningContext.features&&this.elements.learningContext.features[e]}checkForWidget(e){e.removeEventListener('keypress',this.handlePlayingWidgets),e.removeEventListener('click',this.handlePlayingWidgets),e.addEventListener('keypress',this.handlePlayingWidgets),e.addEventListener('click',this.handlePlayingWidgets)}parse(e){const t=this.elements&&this.elements.componentElement?this.elements.componentElement:null,n={},a=[...(e||[]),'data-uri','data-content-uri','data-type','data-contenturn'];return t&&a.forEach((e)=>{n[e]=t.getAttribute(e)}),n}getComponent(e){return this.value=e?Object(a.createElement)('div',null,e):null,this.value}getWrapper(e){const t=e;let n;if(t.displayPreview&&this.elements&&this.elements.componentElement)n=this.elements.componentElement;else if(this.elements&&this.elements.componentElement){const e=document.createElement('div');e.setAttribute('class','interactiveWrapper'),this.elements.componentElement.appendChild(e),n=e,t.props.node=this.elements.componentElement}return n}getContentFromNode(e){const t=[];return e&&0<e.length&&Array.prototype.slice.call(e).forEach((e)=>{const n=e&&e.getAttribute('data-type')&&'mathml'===e.getAttribute('data-type').toLowerCase();if(n){const n=e;p.MathUtil.processMath(),n&&n.childNodes&&n.childNodes.forEach((e)=>{const n=e.nodeName.toLowerCase();'script'===n?t.push({text:e.innerText,type:'mathML'}):!this.isMathMlPreviewNode(e,n)&&t.push({text:e.textContent,type:'text'})})}else t.push({text:e.textContent,type:'text'})}),t}static getBestResolutionUrl(e){const t='rendition=best';return e&&-1===e.indexOf(t)?-1===e.lastIndexOf('?')?`${e}?${t}`:`${e}&${t}`:e}isLearningContextAware(){return!1}createComponent(e,t,n){ae+=1;const o=Object(d.createGenerateClassName)({productionPrefix:`vegaViewerComponent${ae}-`,disableGlobal:!0});let r=Object($.create)(Object(d.jssPreset)());n&&(r=Object($.create)(ne({},Object(d.jssPreset)(),{insertionPoint:n})));const i=this.getComponent(Object.assign({},e,{locale:t.locale}));if(i){const e=this.elements.learningContext;let l=Object(a.createElement)(p.EventProvider,ne({onEvent:e.metadata.onEvent},te.a.eventData(e)),Object(a.createElement)(d.MuiThemeProvider,{theme:t.theme},Object(a.createElement)(Z.IntlProvider,{locale:t.locale},Object(a.createElement)(d.StylesProvider,{jss:r,generateClassName:o},i))));return n&&(l=Object(a.createElement)(p.EventProvider,ne({onEvent:e.metadata.onEvent},te.a.eventData(e)),Object(a.createElement)(Z.IntlProvider,{locale:t.locale},Object(a.createElement)(d.StylesProvider,{jss:r,generateClassName:o},i)))),this.isLearningContextAware()?oe(e)(l):l}return null}getTitle(e){const t=this.elements&&this.elements.figure?this.elements.figure.getElementsByClassName(e):[];return t.length?t[0].textContent:''}render(e,t,n){const a=this.getWrapper(e),o=this.createComponent(e.props,t,n);return o&&T.a.render(o,a),a}}var ie=n(14),le=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};const se=new p.InternationalSupport(ie.a,te.a.getParam('lang')||window.navigator.userLanguage||window.navigator.language),de=se.getMessages();class ce extends re{constructor(e){super(e||'ewl'),Object.defineProperty(this,'getStandAloneData',{enumerable:!0,writable:!0,value:(e)=>e.data}),Object.defineProperty(this,'getComponent',{enumerable:!0,writable:!0,value:(e)=>(this.value=e&&e.src?Object(a.createElement)(Y.ExternalLinkPreviewComponent,e):null,this.value)})}getData(){const e=super.parse();e.displayPreview='mdi'===this.type&&this.getBooleanFeatureParams('enableInlineInteractives'),e.actionType='EWL_WIDGET';const t={},n=this.elements&&this.elements.componentElement;if(n){n.setAttribute('tabindex',0);const a=n.getElementsByTagName('a')&&n.getElementsByTagName('a')[0];if(t.src=a.href,t.type=this.type,t.width=n.getAttribute('data-width')||'',t.height=n.getAttribute('data-height')||'',t.enableInlineInteractives=this.getBooleanFeatureParams('enableInlineInteractives'),n.parentElement){const e=n.parentElement.getElementsByTagName('header')[0];t.title=e&&e.innerText?e.innerText:''}t.isNewTab='ewl'===this.type,'ewl'===this.type&&a&&(e.displayOverlay=!1,a.innerHTML=0<a.innerText.trim('').length?a.innerText:de.visitWebsite,a.classList.add('buttonWidgetEWL'));const o=n.getElementsByTagName('img');'tablesl'===this.type&&o&&o[0]&&(o[0].setAttribute('alt','View Table'),o[0].classList.add('imgAltStyle'))}return e.props=t,e}getStandAloneComponent(e){return Object(a.createElement)(Y.ExternalLinkPreviewComponent,le({},e,{standAloneMode:!0}))}}class pe extends o.a.Component{constructor(e){super(e),this.state={inputFields:{},inputFieldsReceived:!1,endPoint:''}}componentWillMount(){var e=this.props;const t=e.data,n=e.context;n.learningContext.clients.backLinkClient.post(t).then((e)=>{200===e.status&&this.setState({inputFields:e.data,inputFieldsReceived:!0,endPoint:e.endPoint})})}componentDidUpdate(){this.state.inputFieldsReceived&&(window.open('','backlinkWindow','scrollbars=yes,menubar=no,height=600,width=800,resizable=yes,toolbar=no,status=no'),this.form.submit(),this.props.onClose())}renderInputElements(){return Object.keys(this.state.inputFields).map((e)=>Object(a.createElement)('input',{type:'hidden',name:e,value:this.state.inputFields[e]}))}render(){return Object(a.createElement)('div',null,this.state.inputFieldsReceived?Object(a.createElement)('form',{ref:(e)=>{this.form=e},method:'post',target:'backlinkWindow',action:this.state.endPoint},this.renderInputElements()):null)}}pe.propTypes={data:i.a.object,context:i.a.object,onClose:i.a.func};var me=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var ge=n(12),ue=n.n(ge),he=n(60),fe=n.n(he);class be extends o.a.Component{constructor(e){super(e),Object.defineProperty(this,'preferenceChanged',{enumerable:!0,writable:!0,value:(e,t)=>e&&t&&(t.theme!==e.theme||t.fontSize!==e.fontSize||t.isAnnotationHide!==e.isAnnotationHide||t.fontSelector!==e.fontSelector||t.lineSpacing!==e.lineSpacing||t.textTransform!==e.textTransform)}),Object.defineProperty(this,'handleMessage',{enumerable:!0,writable:!0,value:(e)=>{if(e.origin===window.location.origin&&'string'==typeof e.data){let t=null;try{t=JSON.parse(e.data)}catch(n){t=e.data}t.sender===x.t&&s.a.publish(x.n,t)}}}),Object.defineProperty(this,'highlightSearchText',{enumerable:!0,writable:!0,value:(e=[],t)=>{let n=t;return e.length&&e.forEach((e)=>{let t=e;t&&(this.searchKey=t.split('*key=')[1]?t.split('*key=')[1]:'',this.searchKey&&(t=t.split('*key=')[0]),n=n.replace(new RegExp(`${t}(?![^<>]*>)`,'g'),(t)=>`<span class='pxereaderSearchHighlight' style='background: #FFA040 !important;'>${t}</span>`))}),n}}),Object.defineProperty(this,'scriptTagsToAdd',{enumerable:!0,writable:!0,value:(e)=>{let t='';return e&&e.length&&(t+=e.map((e)=>`<script src="${e}" type="text/javascript"></script>`)),t}}),Object.defineProperty(this,'stylesToAdd',{enumerable:!0,writable:!0,value:(e)=>{let t='';return e&&e.length&&(t+=e.map((e)=>`<link href="${e}" type="text/css" rel="stylesheet" />`)),t}}),Object.defineProperty(this,'setBgColor',{enumerable:!0,writable:!0,value:(e)=>{const t=e.theme;if('Akaroa'===t)return'background-color: #F4F2E4 !important;';return'Black'===t?'background-color: #101010 !important;':'background-color: #fff !important;'}}),Object.defineProperty(this,'disableCopy',{enumerable:!0,writable:!0,value:()=>{this.frame&&this.frame.contentWindow&&this.frame.contentWindow.document&&this.frame.contentWindow.document.body&&(this.frame.contentWindow.document.body.oncopy=()=>!1,this.frame.contentWindow.document.body.oncut=()=>!1)}}),Object.defineProperty(this,'annotationHideShow',{enumerable:!0,writable:!0,value:(e)=>{const t=e.learningContext.metadata.pxeUserPreference,n=t.theme,a=e.learningContext.features.enableShowHideAnnotation,o=t.isAnnotationHide,r=this.frame.contentDocument;r.body.className=`viewer-container vega-pxe-viewer annotation-wrapper ${n}`,a&&o&&(r.body.className=`viewer-container vega-pxe-viewer annotation-wrapper ${n} hideAnnotation`)}}),Object.defineProperty(this,'scrollToSearchElement',{enumerable:!0,writable:!0,value:()=>{const e=this.frame.contentDocument;let t='';if(t=this.context.learningContext.metadata.searchByPageId?e.getElementById(this.context.learningContext.metadata.searchByPageId):e.getElementsByClassName('pxereaderSearchHighlight'),this.searchKey){const n=e.querySelectorAll(`#${this.searchKey}`);n&&0<n.length&&(t=n)}t&&setTimeout(()=>{const e=t[0]?t[0]:t;window.scrollTo(0,e.offsetTop)},1e3)}}),Object.defineProperty(this,'setContentFont',{enumerable:!0,writable:!0,value:(e)=>{const t=e.learningContext.metadata.pxeUserPreference;return t.fontSize?`${parseInt(t.fontSize,10)/3.5}px`:'12px'}}),Object.defineProperty(this,'setFrameLineSpace',{enumerable:!0,writable:!0,value:(e,t)=>{if(t){let n='';'wide'===e?n='2.75em':'wider'===e&&(n='3.5em'),t.style.lineHeight=n}}}),Object.defineProperty(this,'setFrameFontFamily',{enumerable:!0,writable:!0,value:(e,t)=>{if(t){const n='default'===e?'':x.c[e];t.style.fontFamily=n}}}),Object.defineProperty(this,'setFrameTextTransform',{enumerable:!0,writable:!0,value:(e,t)=>{t&&(t.style.textTransform='default'===e?'':'uppercase')}}),Object.defineProperty(this,'setPreference',{enumerable:!0,writable:!0,value:(e,t=!1)=>{const n=e.learningContext.metadata.pxeUserPreference,a=this.frame.contentDocument;if(n&&a&&a.body){const o=this.setBgColor(n),r=a.head.querySelector('style[data-theme="PXE"]');r&&0<=r.innerText.indexOf('UPDATE_BODY_THEME')&&(r.innerText=`/* UPDATE_BODY_THEME */ body{ ${o} }`);const l=a.querySelectorAll('link[title][rel*="stylesheet"]');let s;this.setFrameFontFamily(n.fontSelector,a.body),this.setFrameLineSpace(n.lineSpacing,a.body),this.setFrameTextTransform(n.textTransform,a.body),a.body.style.fontSize=this.setContentFont(e);let d=n.theme||'White';if('Akaroa'===d?d='sepia':'Black'===d&&(d='night'),t){const e=this.frame&&this.frame.contentWindow,t=e&&e.pearsoned&&e.pearsoned.Vega&&e.pearsoned.Vega.context&&e.pearsoned.Vega.context.features&&e.pearsoned.Vega.context.features.enablePrintPageNumbers;if(t){const t=a.querySelectorAll('.pagebreak, .pageBreak');t&&t.length&&e&&e.dispatchEvent(new Event('resize'))}}if(a.querySelectorAll(`link[title="${d}"]`).length){for(let e=0;e<l.length;e+=1){const t=l[e];t.disabled=!0,t.title===d&&(s=t)}s.disabled=!1}else for(let e=0;e<l.length;e+=1){const t=l[e];t.disabled=!0,'sepia'!==t.title&&'night'!==t.title&&(t.disabled=!1)}this.annotationHideShow(e)}this.frame.classList.remove('hideContent')}}),this.contentChanged=!0,this.frame=null,this.messageId=0,this.state={isLoadingFrame:!0},this.renderedElements=[],this.handlePageClick=this.handlePageClick.bind(this),this.searchKey=''}componentDidMount(){this.resizeTimeoutId=0,this.fixHeightTimeoutId=0,window.addEventListener('resize',this.resizeListener),window.addEventListener('message',this.handleMessage),this.loadFrame(this.props),this.unmountComponents(),this.subscription=s.a.on(x.p,(e)=>{var t=this.frame&&this.frame.contentWindow;const n=t.pearsoned;n&&n.Vega&&n.Vega.dispatcher&&n.Vega.dispatcher.receive(e)}),this.subscribeScrollUsingXpath=s.a.on('scrollUsingXpath',(e)=>{const t=e.xPath,n=this.frame&&this.frame.contentWindow;if(n){const e=this.frame.contentWindow.pearsoned.Vega.getElementBasedOnXpath;try{const n=e(t);n.scrollIntoView()}catch(t){console.log('xpath not found on scroll :',t)}}})}shouldComponentUpdate(e,t,n){const a=this.context.learningContext.metadata.pxeUserPreference,o=n.learningContext.metadata.pxeUserPreference,r=this.state.isLoadingFrame;this.contentChanged=this.props.content!==e.content;const i=this.preferenceChanged(a,o);if(e.socialPostEnabled!==this.props.socialPostEnabled&&e.socialPostEnabled&&this.frame&&this.props.getContentIndicatorsCallbacks(this.frame.contentWindow.document),this.contentChanged)this.loadFrame(e);else if(i)this.setPreference(n,!0),this.frame&&this.frame.contentWindow&&this.frame.contentWindow.document&&this.props.updateContentIndicatorsCallbacks(this.frame.contentWindow.document);else if(r!==t.isLoadingFrame)return!0;return!1}componentWillUnmount(){window.removeEventListener('resize',this.resizeListener),window.removeEventListener('message',this.handleMessage),this.subscription&&this.subscription(),this.subscribeScrollUsingXpath&&this.subscribeScrollUsingXpath(),this.unmountComponents()}unmountComponents(){this.renderedElements.length&&(this.renderedElements.forEach((e)=>{T.a.unmountComponentAtNode(e)}),this.renderedElements=[])}handlehover(){const e=this.frame&&this.frame.contentWindow&&this.frame.contentWindow.document,t=e.querySelectorAll('.pearson-component.interactive-click');t.forEach((e)=>{e.classList.remove('interactive-click')});let n='.pearson-component.video button,';n+=' .pearson-component.video ul div[role="button"],',n+=' .pearson-component.video span[role="button"],',n+='.pearson-component.video div[role="progressbar"]';const a=e.querySelectorAll(n);a.forEach((e)=>{e.removeAttribute('data-focus')})}handleKeyup(){const e=this.frame&&this.frame.contentWindow&&this.frame.contentWindow.document,t=e.querySelectorAll('.pearson-component:not(.interactive-click)');t.forEach((e)=>{e.classList.add('interactive-click')});let n='.pearson-component.video button:not(.interactive-click),';n+=' .pearson-component.video ul div[role="button"]:not(.interactive-click),',n+=' .pearson-component.video span[role="button"]:not(.interactive-click),',n+=' .pearson-component.video div[role="progressbar"]:not(.interactive-click)';const a=e.querySelectorAll(n);a.forEach((e)=>{e.setAttribute('data-focus','interactive-click')})}loadFrame(e){const t=this.context.learningContext.metadata.searchText,n=this.setContentFont(this.context),a=this.highlightSearchText(t,e.content),o=this.context.learningContext.annotationContentType;let r='';if(o===x.w){const e=document.getElementsByTagName('style');for(let t=0;t<e.length;t+=1)(e[t].innerText.startsWith('.aquila-volume-bar-')||e[t].innerText.includes('.divVideo')||e[t].innerText.includes('pearson-component'))&&(r+=e[t].innerText)}if(this.frame&&this.contentChanged){const e=this;e.annLoaded=!1,setTimeout(()=>{var t=e.context.learningContext.metadata;const o=t.pxeUserPreference,i=t.plumColor,l=t.lightTealColor,s=this.setBgColor(o),d=this.frame&&this.frame.contentWindow&&this.frame.contentWindow.document,c=a.indexOf('<head');let p=`${a.slice(0,c)}
            <base href="${this.props.basePath}" />
            <link href="${this.props.viewerStyles}" type="text/css" rel="stylesheet" />
            <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" >
            ${this.stylesToAdd(this.props.stylesToAdd)}
            <script src="${this.props.viewerScript}" type="text/javascript"></script>
            ${this.scriptTagsToAdd(this.props.scriptsToAdd)}
            ${a.slice(c)}`;const m=p.indexOf('</head');p=`${p.slice(0,m)}
          <style>
            body{
              font-Size: ${n}
            }
            .White .searchHighlight, .Akaroa .searchHighlight {
              background-color: #D5D5D5;
              border-bottom: 2px solid #000;
            }
            .Black .searchHighlight {
              background-color: rgba(255, 255, 255, 0.2);
              border-bottom: 2px solid #eee;
            }
            .White .keyword, .Akaroa .keyword {
              color: ${i};
            }
            .Black .keyword {
              color: ${l};
            }
            .White #renderPopup .popup .glossaryTerm, .Akaroa #renderPopup .popup .glossaryTerm {
              color: #05112A;
            }
            .White #renderPopup .popup .glossaryDefinition, .Akaroa #renderPopup .popup .glossaryDefinition {
              color: #333333;
            }
            .Black #renderPopup .popup .glossaryTerm {
              color: #FEFEFE;
            }
            .Black #renderPopup .popup .glossaryDefinition {
              color: #F7F9FD;
            }
            .White .overlay .popup {
              background : #FEFEFE;
            }
            .Akaroa .overlay .popup {
              background : #FCFAED;
            }
            .Black .overlay .popup {
              background : #1C1C1E;
            }
            ${r}
          </style>
          <style data-theme = "PXE"> /* UPDATE_BODY_THEME */ body{ ${s} } </style>
          ${p.slice(m)}`,d&&(d.open(),this.props.scriptsToReplace.forEach((e)=>{p=p.replace(new RegExp(e.old,'g'),e.new)}),d.writeln(p),d.close())},1),this.frame.classList.add('hideContent')}}parseComponents(){this.setState({isLoadingFrame:!1});const e=this;if(this.frame){this.frame.contentWindow.document.body.onclick=()=>{e.props.onPageClick()},this.setPreference(this.context),this.scrollToSearchElement();const t=this.context.learningContext.annotationContentType;this.disableCopy(),t===x.w&&this.audioAndVideoParser();try{const t=this.frame.contentWindow.document.body.getElementsByTagName('a'),n=x.i;Array.prototype.forEach.call(t,(e)=>{const t=e.href;if(-1!==t.indexOf(n)){const a=window.location.hostname,o=-1===t.split(n)[1].indexOf('/eps')?`${a}/eps`:a,r=t.replace(t.split('/')[2],o);e.href=r}}),e.props.getContentIndicatorsCallbacks(this.frame.contentWindow.document)}catch(e){}}}audioAndVideoParser(){const e=this.frame;if(e){const t=e.contentWindow.document.head.lastChild,n=e.contentWindow.document.body.querySelectorAll('.figureVideo, .figureAudio');for(let a=0;a<n.length;a+=1){const o=Ie.getParser(n[a]),r=n[a].getElementsByClassName('pearson-component')[0];if(r&&(r.onmouseover=(t)=>{this.handlehover(t)},r.onkeyup=(t)=>{this.handleKeyup(t)}),o){r.setAttribute('rendered',!0);const n=o.getData(e);this.renderedElements.push(o.render(n,this.props,t))}}}}handlePageClick(){this.props.onPageClick()}render(){const e=this.state.isLoadingFrame;var t=this.context.learningContext.titleData;t=t===void 0?{}:t;var n=t.chapterTitle;const o=n===void 0?'vega-pxe-frame':n,r=Object(a.createElement)(ue.a,{style:{position:'absolute',top:'50%',right:'50%',zIndex:'99999'}});return Object(a.createElement)(a.Fragment,null,e&&r,Object(a.createElement)('iframe',{title:o,className:'vega-pxe-frame vega-pxe-frame-print-page',ref:(e)=>{this.frame=e},id:'contentIframe',width:'100%',onLoad:()=>this.parseComponents(this),allowFullScreen:'allowfullscreen'}))}}be.propTypes={content:i.a.string.isRequired,basePath:i.a.string.isRequired,viewerScript:i.a.string.isRequired,viewerStyles:i.a.string.isRequired,scriptsToReplace:i.a.arrayOf(i.a.shape({old:i.a.string.isRequired,new:i.a.string.isRequired})),scriptsToAdd:i.a.arrayOf(i.a.string),stylesToAdd:i.a.arrayOf(i.a.string),onPageClick:i.a.func,updateContentIndicatorsCallbacks:i.a.func.isRequired,socialPostEnabled:i.a.bool,getContentIndicatorsCallbacks:i.a.func},be.defaultProps={scriptsToReplace:[],scriptsToAdd:[],stylesToAdd:[],onPageClick:()=>{},socialPostEnabled:!1,getContentIndicatorsCallbacks:()=>{}},be.contextTypes={learningContext:i.a.shape(w.b).isRequired};class ye extends o.a.Component{constructor(e){super(e),Object.defineProperty(this,'getContent',{enumerable:!0,writable:!0,value:(e)=>{this.pageDataClient=new p.CacheEnabledClient(this.props.context.learningContext.clients.page),this.pageDataClient.get(e).then((e)=>{this.setState({open:!0,content:e.data,pageUrl:e.config?e.config.url:null})},(e)=>{console.error(e)})}}),Object.defineProperty(this,'handleClose',{enumerable:!0,writable:!0,value:()=>{this.setState({open:!1})}}),this.state={open:!1,pageUrl:'',content:''}}componentWillReceiveProps(e){e.time!==this.props.time&&(e.href===this.props.href&&''!==this.state.content?this.setState({open:!0}):this.getContent(e.href))}componentWillMount(){this.getContent(this.props.href)}render(){return Object(a.createElement)(p.Modal,{animate:!0,contentLabel:'',modalIsOpen:this.state.open,onClose:this.handleClose},Object(a.createElement)('div',null,Object(a.createElement)(p.Header,{isFloatingHeader:!0,onClose:this.handleClose}),Object(a.createElement)('div',{className:'vega-pxe-viewer'},Object(a.createElement)('div',{className:'viewer-body'},Object(a.createElement)(be,{ref:(e)=>{this.pxeFrame=e},content:this.state.content,basePath:this.state.pageUrl,viewerScript:this.props.context.learningContext.pxeOptions.script,viewerStyles:this.props.context.learningContext.pxeOptions.style,scriptsToAdd:this.props.context.learningContext.pxeOptions.scriptsToAdd,stylesToAdd:this.props.context.learningContext.pxeOptions.stylesToAdd,scriptsToReplace:this.props.context.learningContext.pxeOptions.scriptsToReplace})))))}}ye.propTypes={context:i.a.object.isRequired,href:i.a.string.isRequired,time:i.a.number.isRequired};var Ce=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var ve=n(42),Ee=n.n(ve);var Pe=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};class xe extends re{constructor(){super('video'),Object.defineProperty(this,'getTrackTranscriptObj',{enumerable:!0,writable:!0,value:(e,t,n,a)=>{const o={src:e};return t&&(o.title=t),n&&(o.type=n),a&&(o.lang=a),o}}),Object.defineProperty(this,'getTrackAudioDescriptionObj',{enumerable:!0,writable:!0,value:(e,t)=>{const n={src:e};return t&&(n.label=t),n}})}getData(e){const t=super.parse(),n=this.elements.figure,a=this.elements.componentElement,o=n.getElementsByClassName('heading4VideoNumberLabel'),r={};t.displayPreview=!0;const i=a.getElementsByTagName('video')[0],l=this.elements.learningContext.analyticsData;if(l&&(r.analyticsEventData={event:'videoplayerevent',event_category:'Video Player',book_id:l.bookId,course_section_id:l.courseId,chapter_id:l.chapterId}),i){r.enableMiniPlayer=!0;const t={};t.thumbnail={},t.id=this.getId(n),t.thumbnail.src=i.getAttribute('poster');const l=a.getAttribute('data-start');l&&(t.startTime=+l);const s=a.getAttribute('data-end');s&&(t.endTime=+s);const d=a.getAttribute('data-enhanced');d&&(t.chapteringMarkup=this.getNavXmldata(d)),t.dataDuration=a.getAttribute('data-duration'),t.anonymous=!0,t.transcript=[],t.audioDescriptions=[];const c=Array.from(i.getElementsByTagName('source')),p=Array.from(i.getElementsByTagName('track'));c&&0<c.length&&(t.src=re.getBestResolutionUrl(c[0].src),c.forEach((e)=>{const n=e.getAttribute('src'),a=e.getAttribute('data-label'),o=e.getAttribute('data-kind');o&&o===xe.VIDEO_TRACK.DESCRIPTIONS&&t.audioDescriptions.push(this.getTrackAudioDescriptionObj(n,a))})),p.length&&p.forEach((e)=>{const n=e.getAttribute('src'),a=e.getAttribute('label'),o=e.getAttribute('kind'),r=e.getAttribute('srclang');(o===xe.VIDEO_TRACK.SUBTITLES||o===xe.VIDEO_TRACK.CAPTIONS)&&t.transcript.push(this.getTrackTranscriptObj(n,a,o,r))}),t.displayTitle=this.getContentFromNode(n.getElementsByClassName('heading4VideoTitle'));let m=null;if(a.parentElement){const e=a.parentElement.getElementsByTagName('header')[0];m=e&&e.innerText?e.innerHTML:null}t.title=m,t.contentURN=i.getAttribute('data-contenturn'),t.caption=this.getContentFromNode(n.getElementsByTagName('figcaption')),t.action=o.length?o[0].textContent:'',t.alt='',r.data=t,e&&(r.enableNativeFullScreen=!0)}return t.props=r,t}getStandAloneData(e){this.message=e;let t='';return this.message.data&&this.message.data.sources&&this.message.data.sources.length&&(t=this.message.data.sources[0].url),t?{data:{src:re.getBestResolutionUrl(t),title:'',posterUrl:`${t}?mimeType=jpg`,trackUrl:`${t}?mimeType=vtt&lang=en`,autoPlay:!0,thumbnail:{}}}:null}getComponent(e){return this.value=e?Object(a.createElement)(ve.VideoPlayerPreviewComponent,Pe({},e,{enableTranscripts:!0,useCredentials:!1})):null,this.value}getStandAloneComponent(e){return Object(a.createElement)(ve.VideoPlayerPreviewComponent,Pe({},e,{standAloneMode:!0,enableTranscripts:!0,useCredentials:!1}))}}Object.defineProperty(xe,'VIDEO_TRACK',{enumerable:!0,writable:!0,value:{SUBTITLES:'subtitles',DESCRIPTIONS:'descriptions',CAPTIONS:'captions'}});var we=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};X.register(new ce),X.register(new ce('mdi')),X.register(new ce('pdf')),X.register(new class extends re{constructor(){super('lms')}getStandAloneData(e){this.event=e;const t={},n={guid:this.event.data.guid};return t.data=n,t}getStandAloneComponent(e,t){this.data=e;const n={context:me({},t)};return Object(a.createElement)(pe,me({},this.data,n))}}),X.register(new class extends re{constructor(e){super(e||'xrefContent'),Object.defineProperty(this,'getStandAloneData',{enumerable:!0,writable:!0,value:(e)=>e.data})}getStandAloneComponent(e,t){return Object(a.createElement)(ye,Ce({},e,{context:t}))}}('xrefContent')),X.register(new class extends re{constructor(){super('audio')}getData(e){const t=super.parse(),n={};if(t.displayPreview=!0,this.elements&&this.elements.componentElement){const a=this.elements.learningContext.analyticsData;a&&(n.analyticsEventData={event:'audioevent',event_category:'Embedded Audio',book_id:a.bookId,course_section_id:a.courseId,chapter_id:a.chapterId});const o=this.elements&&this.elements.figure?this.elements.figure:null,r=this.elements.componentElement,i=r.getElementsByTagName('audio')[0];if(i&&i.getElementsByTagName('source')[0]){const e=i.getElementsByTagName('source')[0];n.url=e.src,n.displayTitle=this.getContentFromNode(o.getElementsByClassName('heading4AudioTitle')),n.title=this.getTitle('heading4AudioNumberLabel'),n.VolumeBarFlippable=!0,o.getElementsByClassName('audio').length&&o.getElementsByClassName('audio')[0].setAttribute('tabindex',0)}return e,t.props=n,t}return null}getComponent(e){return this.value=e&&e.url?Object(a.createElement)(ve.AudioPlayerComponent,e):null,this.value}}),X.register(new class extends re{constructor(){super('contextualAudio')}getData(){const e=super.parse(),t={};if(e.displayPreview=!0,this.elements&&this.elements.componentElement){this.elements.componentElement.setAttribute('tabindex',0);const n=this.elements&&this.elements.figure?this.elements.figure:null,a=this.elements.componentElement,o=a.getElementsByTagName('audio')[0];if(o&&o.getElementsByTagName('source')[0]){const e=o.getElementsByTagName('source')[0];t.url=e.src,t.displayTitle=this.getContentFromNode(n.getElementsByClassName('heading4AudioTitle')),t.title=this.getTitle('heading4AudioNumberLabel'),t.type='contextual'}return e.props=t,e}return null}getComponent(e){return this.value=e&&e.url?Object(a.createElement)(ve.AudioPlayerComponent,e):null,this.value}}),X.register(new xe),X.register(new class extends re{constructor(e){super(e||'image'),Object.defineProperty(this,'applyImagePlaceHolder',{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.getElementsByTagName('img')[0],a=n.parentElement,o=parseInt(a.getAttribute('data-height'),10),r=parseInt(a.getAttribute('data-width'),10),i=this.getDynamicImgWidth(n);if(n&&a&&!document.querySelector('.popover-container')){a.classList.add('placeholder',`${t}`,'placeholder-dynamic-width',`${i}`);const e=o/r*a.offsetWidth;a.style.setProperty('--placeholderHeight',`${e}px`),n.onload=()=>{this.isInViewport(a,t,i)}}e.removeEventListener('keyup',this.handleKeyup),e.addEventListener('keyup',this.handleKeyup),e.removeEventListener('click',this.handleClick),e.addEventListener('click',this.handleClick)}}),Object.defineProperty(this,'getDynamicImgWidth',{enumerable:!0,writable:!0,value:(e)=>{let t;const n=e.getAttribute('class');return t='imageFullscreen'===n||'imageFullscreenTableImage'===n||'imageFullscreenMathImage'===n?'FullScreen':'imageWiderThanText'===n||'imageWiderThanTextTableImage'===n||'imageWiderThanTextMathImage'===n?'WiderThanText':'imageTextWidth'===n||'imageTextWidthTableImage'===n||'imageTextWidthMathImage'===n?'TextWidth':'image50Text'===n||'image50TextTableImage'===n||'image50TextMathImage'===n?'Text50Width':'image25Text'===n||'image25TextTableImage'===n||'image25TextMathImage'===n?'Text25Width':'TextWidth',t}}),Object.defineProperty(this,'isInViewport',{enumerable:!0,writable:!0,value:(e,t,n)=>{if(window.IntersectionObserver){const a=new window.IntersectionObserver((a,o)=>{a.forEach((a)=>{a.isIntersecting&&(e.classList.remove('placeholder',`${t}`,'placeholder-dynamic-width',`${n}`),e.style.removeProperty('--placeholderHeight'),e.classList.add('imagePlaceholder'),o.unobserve(a.target))})});a.observe(e)}}}),Object.defineProperty(this,'getStandAloneData',{enumerable:!0,writable:!0,value:(e)=>{const t={},n={};n.src=e.data.url,n.title=e.data.title||'',n.alt=e.data.alt||'';const a=e.data.caption||'';return n.caption=0<=a.indexOf('&nbsp')?'':a,n.width='100%',t.data=n,t}}),Object.defineProperty(this,'returnImageForMobile',{enumerable:!0,writable:!0,value:(e)=>e?Object(a.createElement)('img',{src:e.getAttribute('src'),className:e.getAttribute('class'),alt:e.getAttribute('class'),title:e.getAttribute('title'),"data-versionurn":e.getAttribute('data-versionurn'),"data-contenturn":e.getAttribute('data-contenturn')}):''}),Object.defineProperty(this,'handleImageLightBoxClose',{enumerable:!0,writable:!0,value:(e)=>{const t=document.getElementsByClassName('popover-content')[0];t&&(e&&t.setAttribute('tabIndex',0),t.focus())}})}getData(){if(this.elements&&this.elements.componentElement){const e=this.elements.learningContext.features,t=this.elements.componentElement,n=super.parse(),a={};n.displayPreview=!1,e&&(n.displayPreview=e.enableNewInteractives,a.isNewInteractives=e.enableNewInteractives);const o=t.getElementsByTagName('img')[0],r=t.getAttribute('data-scalemarker-url'),i=this.elements.theme.activeColor;if(null!==o){const e={},l={};e.src=o.getAttribute('src'),e.id=e.src,e.contentURN=o.getAttribute('data-contenturn');let s=null;if(t.parentElement){const e=t.parentElement.getElementsByTagName('header')[0];s=e&&e.innerText?e.innerHTML:null}e.title=s,e.alt=o.getAttribute('alt'),o.setAttribute('tabindex',0),o.onerror=(e)=>{const t=e&&e.target?e.target.currentSrc:'',n=`<div class="imagePreviewError">
          We're sorry, the following asset could not be loaded: <div class="assetMsgPath">${t}</div></div>`;o.offsetParent.innerHTML=n},this.elements.tileView||this.applyImagePlaceHolder(t,i),r&&(l.resourcePath=r,l.width=t.getAttribute('data-scalemarker-width'),l.height=t.getAttribute('data-scalemarker-height'),l.altText=t.getAttribute('data-scalemarker-alt-text'),l.imageRef=t.getAttribute('data-uri'),e.scaleImage=l);const d=o.getAttribute('aria-describedby')||o.getAttribute('aria-details');if(d){const n=t.offsetParent&&t.offsetParent.querySelectorAll(`div[data-contenturn='${d}']`);e.longDescription=n&&0<n.length&&n[0].innerHTML}const c=this.elements.figure.getElementsByTagName('figcaption');if(e.caption=c&&0<c.length&&c[0].innerHTML,t.parentNode&&t.parentNode.parentNode){const n=t.parentNode.parentNode,a=n.querySelectorAll('p[class$="Credit"], p[class$="Credit mathml"]');e.credits=a&&0<a.length&&a[0].innerHTML}e.width='100%',!0===n.displayPreview&&(e.classAttribute=o.getAttribute('class')),a.data=e}return n.props=a,n}return null}handleKeyup(){const e=document.querySelectorAll('.image > img:not(.tab-focus-image)');e.forEach((e)=>{e.classList.add('tab-focus-image')})}handleClick(){const e=document.querySelectorAll('.image > img.tab-focus-image');e.forEach((e)=>{e.classList.remove('tab-focus-image')})}getComponent(e){const t=te.a.isMobileDevice(),n=this.elements&&this.elements.popoverInteraction,o=this.elements.learningContext.metadata.showImageInParent||!1,r=this.elements.figure&&this.elements.figure.getElementsByTagName('img')[0],i=e.isNewInteractives?this.returnImageForMobile(r):'',l=o?Object(a.createElement)(ve.NewImageViewerPreviewComponent,we({embeddedMode:e.isNewInteractives},Object.assign(e),{onClose:()=>{this.handleImageLightBoxClose(n)}})):Object(a.createElement)(ve.NewImageViewerPreviewComponent,we({embeddedMode:e.isNewInteractives},Object.assign(e,{parentSelector:()=>this.imageContainer}),{onClose:()=>{this.handleImageLightBoxClose(n)}}));return Object(a.createElement)('div',{className:'imageContainer',ref:(e)=>{this.imageContainer=e}},t.android||t.ios?i:l)}getStandAloneComponent(e){return Object(a.createElement)(ve.NewImageViewerPreviewComponent,we({},e,{standAloneMode:!0}))}});var Ie=X;class Te extends a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.log('content Indicator >',this,e,t)}render(){return this.state.hasError?Object(a.createElement)(a.Fragment,null):this.props.children}}Te.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},Te.defaultProps={children:null};const Ae=Object(Z.defineMessages)({title:{id:'title',defaultMessage:'Viewer'},emptyMessage:{id:'emptyMessage',defaultMessage:'Your viewer is empty'},page:{id:'page',defaultMessage:'Page Number'},shared:{id:'shared',defaultMessage:'Shared'},fromInstructor:{id:'fromInstructor',defaultMessage:'From instructor'},visitWebSite:{id:'visitWebSite',defaultMessage:'Visit Website'},tableOverLay:{id:'tableOverLay',defaultMessage:'Scroll right to view entire table'},visitLink:{id:'visitLink',defaultMessage:'Visited link interactive'},multiColumnOverLay:{id:'multiColumnOverLay',defaultMessage:'Scroll right to view multi column'},openPosts:{id:'openPosts',defaultMessage:'Open posts'}});var ke=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(e){o=!0,r=e}finally{try{!a&&l['return']&&l['return']()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();const Se='dark',Le=14,Ne=Object(d.makeStyles)({popover:{pointerEvents:'none',padding:0,marginTop:0,borderRadius:0},paper:{padding:0,overflow:'visible'},tooltip:{display:'inline-block',background:'#05112A',borderRadius:8,minWidth:89,maxWidth:116},tooltipArrow:{position:'absolute',bottom:'100%',left:'50%',marginLeft:-8,borderWidth:8,borderStyle:'solid',borderColor:'#05112A transparent transparent transparent',transform:'rotate(180deg)'},tooltipText:{display:'inline-block',fontFamily:'Open Sans',fontSize:14,fontWeight:600,lineHeight:'18px',textAlign:'center',padding:'6px 12px',color:'#F7F9FD',width:'100%'},tooltipNight:{background:'#F7F9FD'},tooltipTextNight:{color:'#05112A'},tooltipArrowNight:{borderColor:'#F7F9FD transparent transparent transparent'}}),Fe=(e)=>{const t=e.intl.formatMessage,n=e.theme,r=Ne(e);var i=o.a.useState(!1),l=ke(i,2);const d=l[0],c=l[1];var p=o.a.useState({top:0,left:0}),m=ke(p,2);const g=m[0],u=m[1],h=o.a.useRef(),f=(e)=>{const t=e,n=document.getElementById('contentIframe'),a=document.querySelector('.vega-reader-content');if(n){a&&(t.top+=a.getBoundingClientRect().top);const e=document.querySelectorAll('.drawer-tab-container')[0];if(e){const n=e.classList.contains('open');(a||n)&&(t.left+=e.clientWidth)}}else a&&(t.top+=window.pageYOffset);return t},b=(e)=>{const t=f({top:e.interactionPoint.top,left:e.interactionPoint.left});'mouseover'===e.type?(c(!0),u({top:t.top+Le+5,left:t.left+Le})):c(!1)};o.a.useEffect(()=>{const e=s.a.on(x.l,(e)=>{b(e)}),t=s.a.on(x.m,()=>{c(!1)});return()=>{e&&e(),t&&t()}},[]);const y=t(Ae.openPosts);return Object(a.createElement)(A.Popover,{id:'post-hover-popover',className:r.popover,classes:{paper:r.paper},open:d,anchorReference:'anchorPosition',anchorPosition:{top:g.top,left:g.left},anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'},onClose:()=>{},disableRestoreFocus:!0,marginThreshold:0,elevation:0},Object(a.createElement)('span',{className:`${r.tooltip} ${n.activeColor===Se&&r.tooltipNight}`},Object(a.createElement)('span',{ref:h,className:`${r.tooltipArrow} ${n.activeColor===Se&&r.tooltipArrowNight}`}),Object(a.createElement)('span',{className:`${r.tooltipText} ${n.activeColor===Se&&r.tooltipTextNight}`},y)))};Fe.propTypes={intl:Z.intlShape,theme:i.a.object.isRequired};var Be=Object(d.withTheme)(Object(Z.injectIntl)(Fe)),Oe=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};class De extends o.a.Component{constructor(e,t){super(e,t),Object.defineProperty(this,'getContentWindow',{enumerable:!0,writable:!0,value:()=>{const e=this.pxeFrame&&this.pxeFrame.current,t=e&&e.frame;let n=t&&(t.contentWindow||t.contentDocument);if(!n){const e=document.querySelector('.vega-reader-content'),t=e&&e.getElementsByTagName('iframe')[0];n=t&&(t.contentWindow||t.contentDocument)}return n}}),Object.defineProperty(this,'scrollToContent',{enumerable:!0,writable:!0,value:()=>{const e=this.context.learningContext.features.backMatterNavLink,t=this.getContentWindow();if(t&&e){const n=t.document.querySelectorAll(`[data-contenturn="${e}"],[data-uri="${e}"]`),a=document.getElementsByClassName('headerBar')[0]||document.getElementsByClassName('vega-reader-header')[0],o=a.clientHeight;n&&0<n.length&&t&&o&&t.scrollTo(0,n[0].getBoundingClientRect().top-o-15)}s.a.publish('pxeFramePageBreaksLoaded',t)}}),Object.defineProperty(this,'onPageDidLoad',{enumerable:!0,writable:!0,value:()=>{const e=document.getElementById('contentIframe'),t=e&&e.contentWindow,n=t&&t.pearsoned.annotationInterface;this.annotationInterface=n,this.props.setAnnotationInterface(this.annotationInterface),this.props.fetchAnnotation(this.props.pageId),this.subscribeSocialPostHighlight=s.a.on('socialPostHighlight',(e)=>{n.load(e)}),this.subscribeSocialPostDeleteHighlight=s.a.on('deleteSocialPostHighlight',(e)=>{n.delete(e)})}}),Object.defineProperty(this,'getContentIndicators',{enumerable:!0,writable:!0,value:(e)=>{this.setState({showContentIndicator:!1}),this.context.learningContext.clients.socialApi.getPostsMarkups(this.props.pageId).then((t)=>{const n=t.map((e)=>this.getParaPosition(e.count,e.paraIdentifier,e.link)),a=n.filter((e)=>null!=e);this.setState({showContentIndicator:!0,contentIdicatorData:a,targetElement:e,selectedParaId:!1})}).catch((e)=>console.log(e))}}),Object.defineProperty(this,'getParaPosition',{enumerable:!0,writable:!0,value:(e,t,n)=>{const a=document.getElementById('contentIframe').contentWindow.pearsoned.Vega.getElementBasedOnXpath;try{const o=a(t);if(o){const a=o.currentStyle||window.getComputedStyle(o);let r=a.marginBottom||'0px';return r=r.substring(0,r.length-2),{count:e,position:o.getBoundingClientRect(),type:'posts',paraStyle:+r,paraIdentifier:t,ele:o,link:n}}}catch(t){console.log('xpath not found from getContentIndicators:',t)}return null}}),Object.defineProperty(this,'updateCIOnPreferenceChange',{enumerable:!0,writable:!0,value:(e)=>{this.setState({showContentIndicator:!1});const t=this.state.contentIdicatorData,n=t.map((e)=>this.getParaPosition(e.count,e.paraIdentifier,e.link)),a=n.filter((e)=>null!=e);this.setState({showContentIndicator:!0,contentIdicatorData:a,targetElement:e,selectedParaId:!1})}}),Object.defineProperty(this,'updateContentIndicators',{enumerable:!0,writable:!0,value:(e)=>{this.setState({showContentIndicator:!1});const t=e.count;var n=this.state;const a=n.contentIdicatorData,o=n.targetElement,r=e.paraIdentifier,i=e.link,l=a.find((e)=>e.paraIdentifier.toLowerCase()===r.toLowerCase());let s=a;l||1!==t?l&&0===t&&(s=a.filter((e)=>e.paraIdentifier.toLowerCase()!==r.toLowerCase())):s.push({count:t,paraIdentifier:r,link:i});const d=s.map((e)=>this.getParaPosition(e.paraIdentifier.toLowerCase()===r.toLowerCase()?t:e.count,e.paraIdentifier,e.link)),c=d.filter((e)=>null!=e);this.setState({showContentIndicator:!0,contentIdicatorData:c,targetElement:o,selectedParaId:!!e.shouldUpdateSelectedParaId&&r})}}),this.state={components:[],showContentIndicator:!1,contentIdicatorData:[],targetElement:null,selectedParaId:!1},this.pxeFrame=o.a.createRef(),this.annotationInterface=null}componentWillReceiveProps(e){this.props.theme.activeColor!==e.theme.activeColor&&this.props.handleAnnotationsTheme(e.theme.activeColor)}componentDidMount(){this.interactiveDataClient=new p.CacheEnabledClient(this.context.learningContext.clients.interactive,{max:20,maxAge:7200000}),Ie.setLearningContext(this.context.learningContext),Ie.setThemeContext(this.props.theme),this.annDataClient=this.context.learningContext.clients.annotation,document.body.dispatchEvent(new CustomEvent('contentLoaded')),this.cancelSubscription=s.a.on(x.n,(e)=>{this.handleMessage(e)}),this.subscribePostCreation=s.a.on('socialPostCreated',(e)=>{this.updateContentIndicators(e)}),this.subscribePostDelete=s.a.on('socialPostDelete',(e)=>{this.updateContentIndicators(e)})}componentWillUnmount(){this.props.destroyAnnotation(),this.cancelSubscription(),this.subscribePostCreation&&this.subscribePostCreation(),this.subscribePostDelete&&this.subscribePostDelete(),this.subscribeSocialPostHighlight&&this.subscribeSocialPostHighlight(),this.subscribeSocialPostDeleteHighlight&&this.subscribeSocialPostDeleteHighlight()}getParser(e){const t=Ie.getParserByType(e.type);if(t){const n=Oe({},t.getStandAloneData(e),{locale:this.props.locale});n.onClose=()=>{this.setState({components:[]})},this.setState({components:Object(a.createElement)(d.MuiThemeProvider,{theme:this.props.theme},t.getStandAloneComponent(n,this.context))})}}handleMessage(e){switch(e.type){case'init':{s.a.publish(x.p,{type:'context',sender:x.u,data:this.context.learningContext});break}case'frameLoaded':{this.onPageDidLoad(),this.props.onPageLoad(this.props.currentPageId);break}case'annotation':{this.onAnnotationSubmit(e.data.eventType,e.data.annObj);break}case'annotation-updated':{this.props.onAnnotationUpdate(e.data.annType,e.data.annotationObj);break}case g.AnnotationUtil.actions.NewSelection:case g.AnnotationUtil.actions.TappedSelection:case g.AnnotationUtil.actions.Remove:{s.a.publish(e.type,e.data);break}case'scrollEvent':{this.props.onScroll(e.data),s.a.publish('pxeFramePageBreaksLoaded',this.getContentWindow());break}case'scroll':{window.scrollTo(e.data.left,e.data.top-50);break}case'scrollToContentPrintPage':{this.scrollToContent();break}case'pageNumberBlocksNotLoaded':{s.a.publish('pxeFramePageBreaksLoaded',this.getContentWindow());break}case'user-tapped-socialpost':{s.a.publish('user-tapped-socialpost');break}default:}this.getParser(e)}findCurrentPage(e){let t=0;return this.props.pagePlayList.every((n,a)=>n.id!==e||(t=a,!1)),t}renderContent(){var e=this.context.learningContext;const t=e.clients,n=e.features;var o=this.state;const r=o.contentIdicatorData,i=o.selectedParaId,l=o.showContentIndicator,s=o.targetElement;return Object(a.createElement)('div',null,this.props.content?Object(a.createElement)('div',null,n.enableAnnotationWidget&&Object(a.createElement)(g.AnnotationComponent,{onChange:this.props.handleAnnotation,onAnnotationSearch:this.props.handleAnnotationSearch,onCreateEditCard:this.props.handleCreateEditCard,getInternalId:this.props.getInternalId,getServerId:this.props.getServerId,storeServerId:this.props.storeServerId,showAnnotation:this.props.showAnnotation,showLabel:n&&n.showAnnotationLabel,showShare:n&&n.showShare,showHighlights:n&&n.showHighlights,showFlashcard:n&&n.showFlashcard,showSearch:n&&n.showSearch,showDictionary:n&&n.showDictionary,showSocialPost:n&&n.showSocialPost,showAudio:n&&n.showAudio,showCustomizeMenu:n&&n.showCustomizeMenu,theme:n&&n.theme,masterTheme:n&&n.masterTheme,annotationClient:this.props.annDataClient,pageId:this.props.pageId,locale:this.props.locale,childComponents:this.props.childComponents}),Object(a.createElement)(be,{ref:this.pxeFrame,content:this.props.content,pageId:this.props.pageId,basePath:this.props.pageUrl,viewerScript:this.context.learningContext.pxeOptions.script,viewerStyles:this.context.learningContext.pxeOptions.style,scriptsToAdd:this.context.learningContext.pxeOptions.scriptsToAdd,stylesToAdd:this.context.learningContext.pxeOptions.stylesToAdd,scriptsToReplace:this.context.learningContext.pxeOptions.scriptsToReplace,onPageClick:this.props.onPageClick,getContentIndicatorsCallbacks:this.getContentIndicators,getPostMarkups:t.socialApi.getPostsMarkups,updateContentIndicatorsCallbacks:this.updateCIOnPreferenceChange,socialPostEnabled:n.showSocialPost}),n.showSocialPost&&l&&Object(a.createElement)(Te,null,Object(a.createElement)(_,{contentIdicatorData:r,handlePostIconClick:n.handleDrawerOpen,selectedParaId:i,showContentIndicator:l,targetElement:s,theme:n&&n.theme}),Object(a.createElement)(Be,null))):'')}render(){return Object(a.createElement)('div',{className:'vega-pxe-viewer'},Object(a.createElement)('div',{className:'viewer-body'},this.renderContent()),Object(a.createElement)('div',{id:'componentArea'},this.state.components))}}De.propTypes={content:i.a.string.isRequired,pageId:i.a.string.isRequired,pageUrl:i.a.string.isRequired,onPageLoad:i.a.func,onScroll:i.a.func,currentPageId:i.a.string.isRequired,pagePlayList:i.a.arrayOf(i.a.object),onAnnotationUpdate:i.a.func,onPageClick:i.a.func,handleAnnotation:i.a.func,setAnnotationInterface:i.a.func,fetchAnnotation:i.a.func,showAnnotation:i.a.bool,locale:i.a.string,theme:i.a.object,annDataClient:i.a.object,getInternalId:i.a.func,getServerId:i.a.func,storeServerId:i.a.func,handleAnnotationSearch:i.a.func,handleCreateEditCard:i.a.func,childComponents:i.a.object,destroyAnnotation:i.a.func,handleAnnotationsTheme:i.a.func},De.contextTypes={learningContext:i.a.shape(w.a).isRequired},De.defaultProps={onPageLoad:()=>{},onPageClick:()=>{},onScroll:()=>{},handleAnnotation:()=>{},handleAnnotationSearch:()=>{},handleCreateEditCard:()=>{},setAnnotationInterface:()=>{},fetchAnnotation:()=>{},locale:'en',childComponents:{},destroyAnnotation:()=>{}};t['default']=Object(d.withTheme)(De)}});
//# sourceMappingURL=3.e090dea9fb459ed86528.chunk.js.map