webpackJsonp_name_([1],{56:function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),l=n(42),d=n.n(l),s=n(2),u=n.n(s),p=n(44),g=n.n(p),c=n(45),h=n.n(c),m=n(46),b=n.n(m),f=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};class y extends a.Component{constructor(...e){var t;return t=super(...e),Object.defineProperty(this,"sendAnalyticsData",{enumerable:!0,writable:!0,value:()=>{var e=this.props;const t=e.audioObject,n=e.bookId,a=e.bookType;s.EventProvider.getEventManager().dispatch({event:"VegaReader Event",category:"Media",action:"Audio",data:{book_id:n,url:t.url,type:t.type,book_type:a}})}}),Object.defineProperty(this,"getKey",{enumerable:!0,writable:!0,value:()=>new Date().getUTCMilliseconds()}),t}shouldComponentUpdate(e){return this.props.isAudioModalShown!==e.isAudioModalShown||(this.props.audioObject&&this.props.audioObject.url===e.audioObject.url?!1:!0)}render(){var e=this.props;const t=e.audioObject,n=e.isAudioModalShown,i=e.isYoungLearnerActive,r=e.onClose;if(n){this.sendAnalyticsData();let e="popoutAudioContainer";return t.type=t.playerType,e=i?`${e} young-learner-audio`:e,Object(a.createElement)(b.a,{open:n,className:e,key:this.getKey()},Object(a.createElement)(o.a.Fragment,null,Object(a.createElement)(h.a,{"aria-label":"Remove",color:"inherit",onClick:r},Object(a.createElement)(p.Icon,{name:"Remove",fontSize:"small",color:"inherit"})),Object(a.createElement)(l.AudioPlayerComponent,f({},t,{useCredentials:!1}))))}return null}}y.propTypes={audioObject:r.a.object,bookId:r.a.string,bookType:r.a.string,isAudioModalShown:r.a.bool,isYoungLearnerActive:r.a.bool,onClose:r.a.func},y.defaultProps={audioObject:{},isAudioModalShown:!1,isYoungLearnerActive:!1,bookId:"",bookType:"",onClose:()=>{}},t.a=y},57:function(e,t,n){"use strict";var a=n(5),o=n.n(a),i=n(6),r=n(4);t.a=class{constructor(e){l.call(this),this.viewerContext=e,this.isSpdf=e.bookType===r.y,this.isEpub=e.bookType===r.v,this.annotationStoreFirstPage=[],this.annotationStoreSecondPage=[]}create(e){const t=e.annotationType,n=e.chapter,a=e.color,o=e.tags,i=e.text,r={color:a,highlight:{content:[],noteText:i||"",ranges:[]}};return r.annotationType=t,r.chapter=n,r.tags=o,r.id=`_${Math.random().toString(36).substr(2,9)}`,r.noteId=r.id,r.shareable=!1,r.text=i||"",this.viewerContext.createHighlight(r),r}delete(e){const t=this.getClickedHighlight(e)[0];if(t){const n=t.isSecondPage,a=this.getStoreIndex(e,n);if(n){const e=this.annotationStoreSecondPage[0].pageId;this.annotationStoreSecondPage.splice(a,1),this.isSpdf?this.restoreSpdfHighlights(this.annotationStoreSecondPage,e,n):this.restoreEpubHighlights(this.annotationStoreSecondPage,this.viewerContext.secondFrame)}else{const e=this.annotationStoreFirstPage[0].pageId;this.annotationStoreFirstPage.splice(a,1),this.isSpdf?this.restoreSpdfHighlights(this.annotationStoreFirstPage,e,n):this.restoreEpubHighlights(this.annotationStoreFirstPage,this.viewerContext.firstFrame)}}}get(){return{highlight:{content:[],noteText:"",ranges:[]}}}getStoreIndex(e,t){let n=[];n=t?this.annotationStoreSecondPage:this.annotationStoreFirstPage;let a=n.findIndex((t)=>t.id===e);if(-1===a){const t=this.viewerContext.props.getServerId(e);a=n.findIndex((e)=>e.id===t)}return a}load(e=[]){const t=this.viewerContext.loadHighlights;0<e.length&&t(this.formatHighlightResponse(e))}sendDimension(){}update(e){const t=e.color,n=e.chapter,a=e.id,o=e.tags,l=e.text,d=this.getClickedHighlight(a)[0],s=d.isSecondPage,u=this.getStoreIndex(a,s),p=this.viewerContext.props.getServerId(a)||a;return d&&(d.id=p,d.noteId=p,d.chapter=n,d.color=t,d.lineColor=i.a.getLineColor(t),d.rgbColor=i.a.hexToRGB(t,r.a),d.highlight.noteText=l,d.data.text=l,d.text=l,d.tags=o,s?(this.annotationStoreSecondPage.splice(u,1),this.annotationStoreSecondPage.push(d),this.isSpdf?this.restoreSpdfHighlights(this.annotationStoreSecondPage,this.annotationStoreSecondPage[0].pageId,s):this.restoreEpubHighlights(this.annotationStoreSecondPage,this.viewerContext.secondFrame)):(this.annotationStoreFirstPage.splice(u,1),this.annotationStoreFirstPage.push(d),this.isSpdf?this.restoreSpdfHighlights(this.annotationStoreFirstPage,this.annotationStoreFirstPage[0].pageId,s):this.restoreEpubHighlights(this.annotationStoreFirstPage,this.viewerContext.firstFrame))),d}};var l=function(){Object.defineProperty(this,"applyEventsOnHighlights",{enumerable:!0,writable:!0,value:(e)=>{const t=e.contentWindow.document,n=t.querySelectorAll("span.readerplus_highlight");if(0<n.length)for(let e=0;e<n.length;e+=1)n[e].addEventListener("click",this.handleHighlightClicked)}}),Object.defineProperty(this,"formatHighlightResponse",{enumerable:!0,writable:!0,value:(e)=>{const t=[];return e.forEach((e)=>{const n=e;e.data&&e.data.ranges&&(!n.data&&(n.data={}),n.data.ranges=e.data.ranges),n.rgbColor=i.a.hexToRGB(n.color,r.a),n.lineColor=i.a.getLineColor(n.color),t.push(n)}),t}}),Object.defineProperty(this,"getChapterDetails",{enumerable:!0,writable:!0,value:(e)=>{let t=[];var n=this.viewerContext;const a=n.context,o=n.props,i=a.learningContext.flatToc,r=this.isEpub&&!o.isFixedLayout;return t=r?i.filter((t)=>{const n=t.id,a=0<=n.toString().indexOf("#")?n.substr(0,n.indexOf("#")):n,o=0<=e.toString().indexOf("#")?e.substr(0,e.indexOf("#")):e;return a===o}):i.filter((t)=>t.id===e),t}}),Object.defineProperty(this,"getClickedHighlight",{enumerable:!0,writable:!0,value:(e)=>{let t=this.annotationStoreFirstPage.filter((t)=>t.id===e),n=!1;if(0<t.length||(n=!0,t=this.annotationStoreSecondPage.filter((t)=>t.id===e)),e.startsWith("_")&&!(0<t.length)){const a=this.viewerContext.props.getServerId(e);n=!1,t=this.annotationStoreFirstPage.filter((e)=>e.id===a),t&&!(0<t.length)&&(n=!0,t=this.annotationStoreSecondPage.filter((e)=>e.id===a))}return t&&t[0]&&(t[0].isSecondPage=n),t}}),Object.defineProperty(this,"getColorCode",{enumerable:!0,writable:!0,value:(e)=>{let t="";return t="Yellow"===e?"#f4d97b":"Green"===e?"#01cbb7":"Pink"===e?"#ffa7d1":"Blue"===e?"#31d0fd":"#9de4cd",t}}),Object.defineProperty(this,"getColorMapping",{enumerable:!0,writable:!0,value:(e)=>{let t="";return t="#ffedad"===e||"#ffcb4e"===e||"#f4d97b"===e?"#f4d97b":"#bbf2b6"===e||"#9de4cd"===e||"#01cbb7"===e?"#01cbb7":"#fed3ec"===e||"#ffadbe"===e||"#ffa7d1"===e?"#ffa7d1":"#7df9fb"===e||"#86d6e6"===e||"#31d0fd"===e?"#31d0fd":"#9de4cd",t}}),Object.defineProperty(this,"getPopupLocation",{enumerable:!0,writable:!0,value:(e)=>{const t=document.querySelector(".pdf-fwr-pc-right").scrollTop;return e.offsetTop-t}}),Object.defineProperty(this,"handleHighlightClicked",{enumerable:!0,writable:!0,value:(e)=>{let t,n=e;this.isSpdf?(t=n.hId,n=n.event):t=n.currentTarget.getAttribute("highlight_id").substring(0,36);let a=this.annotationStoreFirstPage.filter((e)=>e.id===t);0===a.length&&(a=this.annotationStoreSecondPage.filter((e)=>e.id===t));const i=this.getColorMapping(a[0].color),r=(n.currentTarget||n.target).getBoundingClientRect(),l={data:{action:"tap",annotation:{annotationType:a[0].annotationType,chapter:a[0].chapter,color:i,id:a[0].id,noteId:a[0].id,quote:a[0].highlight.selectedText,ranges:a[0].data.ranges,rect:{left:r.left,top:r.top,bottom:r.bottom,right:r.right,width:r.width,height:r.height},highlight:{noteText:a[0].highlight.noteText||"",content:[{type:"text",content:{text:a[0].highlight.selectedText}}]},tags:a[0].tags||[],shareable:!1,text:a[0].highlight.noteText},location:{pageX:783,pageY:this.isSpdf?e.event.clientY:e.clientY+37,screenX:this.isSpdf?e.event.screenX+80:e.screenX+50,screenY:200}},id:a[0].id,sender:"VegaPxeFrame",time:"",type:"user-tapped-highlight"};o.a.publish("user-tapped-highlight",l.data)}}),Object.defineProperty(this,"handleTextSelection",{enumerable:!0,writable:!0,value:(e)=>{if(0<e.selection.length){const t=this.getPopupLocation(e.selection[0])+40;document.querySelector(".annotation")||o.a.publish("user-finished-selection",{top:t,bottom:500,left:e.event.screenX+30})}}}),Object.defineProperty(this,"restoreEpubHighlights",{enumerable:!0,writable:!0,value:(e,t)=>{const n=[...e];var a=this.viewerContext.props;const o=a.highlightUtilities,i=a.isDoublePage;let r="",l="";const d=n.reverse();for(let n=0;n<d.length;n+=1)r=d[n].data?d[n].data.ranges:"",l=`${l+(r||"").split("@")[0]}
      &${d[n].rgbColor}&${d[n].id}&${d[n].lineColor}|`;o.restoreHighlights(l,i,t),this.applyEventsOnHighlights(t)}}),Object.defineProperty(this,"restoreSpdfHighlights",{enumerable:!0,writable:!0,value:(e,t,n)=>{const a=[];let o;const i=this.viewerContext.pdfWrapper;i.removeExistingHighlightElement(n);for(let r=0;r<e.length;r+=1)o={},o.id=e[r].id,o.highlightHash=e[r].data?e[r].data.ranges:"",o.colour=e[r].color||"red",o.rgbColor=e[r].rgbColor,o.lineColor=e[r].lineColor,o.pageNo=t,a.push(o);i.restoreHighlights(a)}})}},58:function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),l=n(2),d=n.n(l),s=n(42),u=n.n(s);class p extends a.PureComponent{sendAnalyticsData(){var e=this.props;const t=e.bookId,n=e.bookType,a=e.videoObject;l.EventProvider.getEventManager().dispatch({event:"VegaReader Event",category:"Media",action:"Video",data:{book_id:t,url:a.src,type:a.type,book_type:n}})}render(){var e=this.props;const t=e.isVideoModalShown,n=e.onClose,o=e.videoObject;return t?(this.sendAnalyticsData(),Object(a.createElement)(s.VideoPlayerPreviewComponent,{data:o,onClose:n,enableTranscripts:!0,standAloneMode:!0,useCredentials:!1})):null}}p.propTypes={bookId:r.a.string,bookType:r.a.string,isVideoModalShown:r.a.bool,onClose:r.a.func,videoObject:r.a.object},p.defaultProps={bookId:"",bookType:"",isVideoModalShown:!1,onClose:()=>{},videoObject:{}},t.a=p},61:function(e){e.exports="data:image/png;base64,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"},62:function(e,t,n){var a=n(63);"string"==typeof a&&(a=[[e.i,a,""]]);var o,i={hmr:!0};i.transform=o,i.insertInto=void 0;n(9)(a,i);a.locals&&(e.exports=a.locals),!1},63:function(e,t,n){t=e.exports=n(8)(!1),t.push([e.i,".EpubViewerContainer .EpubViewerDoublePage{position:absolute;width:100%;height:100%;background-color:#c7c7c7;display:flex}.EpubViewerContainer .EpubViewerDoublePage .firstFrame{float:left;position:relative;height:100%;width:50%;display:flex;align-items:center;justify-content:flex-end}.EpubViewerContainer .EpubViewerDoublePage .firstFrame .bookFrame{float:right;align-items:center;border:0}.EpubViewerContainer .EpubViewerDoublePage .secondFrame{float:left;position:relative;height:100%;width:50%;display:flex;align-items:center}.EpubViewerContainer .EpubViewerDoublePage .secondFrame .bookFrame{float:left;border:0;align-items:center}.EpubViewerContainer .EpubViewerSinglePage{position:absolute;height:100%;width:100%;border:none;text-align:center;background-color:#c7c7c7;display:flex;align-items:center;justify-content:center}.EpubViewerContainer .rightStart{display:none}.EpubViewerContainer .EpubViewer .bookFrame{border:0;width:100%;height:100%}.EpubViewerContainer .loadingOverlay{width:100%;height:100%;position:absolute}.EpubViewerContainer .loadingOverlay .loadingOverlayMessage{background:white;height:100%;width:100%;opacity:0.5}.EpubViewerContainer #loadingOverlay{width:100%;height:calc(100% - 58px);position:absolute;z-index:999;top:0;left:0;background:#fff;margin-top:50px}.EpubViewerContainer .Akaroa #loadingOverlay{background:#F4F2E4}.EpubViewerContainer .Black #loadingOverlay{background:#101010}.EpubViewerContainer .young-learner #loadingOverlay{height:100%;margin-top:0px}.EpubViewerContainer #loading-spinner{pointer-events:none;width:2.5em;height:2.5em;border:0.3em solid transparent;border-top-color:#3f51b5;border-radius:50%;animation:loadingspin 1s linear infinite;position:absolute;left:50%;top:50%;z-index:999}@keyframes loadingspin{100%{transform:rotate(360deg)}}.EpubViewerContainer .popoutAudioContainer{transform:none;left:0px;right:0px}.EpubViewerContainer .popoutAudioContainer .aquila-audio-player{max-width:90%;width:100%;margin:0}.EpubViewerContainer .young-learner-audio{bottom:61px}.viewer-content-shift .EpubViewerContainer .popoutAudioContainer{left:470px}#goToPrevPage,#goToNextPage{display:none}\n",""]),t.locals={backGround:"#fff",darkGray:"#252525",brickRed:"#991300",darkBlue:"#1e496c"}},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n.n(a),i=n(1),r=n.n(i),l=n(56),d=n(7),s=n.n(d),u=n(5),p=n.n(u),g=n(2),c=n.n(g),h=n(57);class m{}Object.defineProperty(m,"computeRelativeSource",{enumerable:!0,writable:!0,value:(e,t)=>{const n=[],a=e.split("/");a.pop();const o=t.split("/");o.forEach((e)=>{".."===e?a.pop():n.push(e)});const i=a.concat(n);return i.join("/")}}),Object.defineProperty(m,"frameVideoObject",{enumerable:!0,writable:!0,value:(e,t,n)=>{const a={};return a.src=e,a.type="video",a.displayTitle=n,a.title=n,a.thumbnail={},a.thumbnail.src=t||"",a.alt="",a}}),Object.defineProperty(m,"frameAudioObject",{enumerable:!0,writable:!0,value:(e,t)=>{const n={};return n.url=e,n.type="audio",n.playerType="",n.displayTitle=t,n.title=t,n.thumbnail={},n.thumbnail.src="",n.alt="",n}}),Object.defineProperty(m,"getObjectFromStorage",{enumerable:!0,writable:!0,value:(e)=>{if(window.localStorage){const t=window.sessionStorage.getItem(e);if(t)return t}return null}});var b=n(61),f=n.n(b);class y{}Object.defineProperty(y,"parseAudioElements",{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.getElementsByTagName("audio");for(let a=0;a<n.length;a+=1)y.replaceAudioElement(n[a],a,t);y.removeAudioElement(e)}}),Object.defineProperty(y,"replaceAudioElement",{enumerable:!0,writable:!0,value:(e,t,n)=>{const a=e.parentNode,o=e.childNodes;let i=e.getAttribute("src");for(let a=0;a<o.length;a+=1)("SOURCE"===o[a].tagName||"source"===o[a].tagName)&&(i=o[a].getAttribute("src"));(-1<i.indexOf("..")||-1===i.indexOf("http")||-1===i.indexOf("https"))&&(i=m.computeRelativeSource(n,i));const r=document.createElement("img");r.setAttribute("audioSource",i),r.setAttribute("src",f.a),r.setAttribute("style","width:60px");const l=document.createElement("div"),d=document.createElement("div");d.classList.add("customAudioElementContainer"),d.setAttribute("style","float:left;width:100%"),l.classList.add("customAudioElement"),l.setAttribute("style","float:left;position:relative;left:40%;cursor: pointer;"),l.setAttribute("id",`customAudioElement${t}`);for(let a=0;a<o.length;a+=1)l.appendChild(o[a]);l.appendChild(r),d.appendChild(l),a.appendChild(d)}}),Object.defineProperty(y,"removeAudioElement",{enumerable:!0,writable:!0,value:(e)=>{const t=e.getElementsByTagName("audio"),n=t.length;for(let a=0;a<n;a+=1)t[0].parentNode.removeChild(t[0])}}),Object.defineProperty(y,"addEventsOnAudio",{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.contentWindow.document,a=n.querySelectorAll(".customAudioElement");for(let o=0;o<a.length;o+=1)a[o].addEventListener("click",function(){const e=this.childNodes;for(let a=0;a<e.length;a+=1)if("SOURCE"===e[a].tagName){const o=e[a].title?e[a].title:n.title?n.title:"EPUB Audio",i=m.frameAudioObject(e[a].src,o);t(i)}else if("IMG"===e[a].tagName){const o=e[a].title?e[a].title:n.title?n.title:"EPUB Audio",i=e[a].getAttribute("audiosource");if(i){const n=m.frameAudioObject(e[a].getAttribute("audiosource"),o);t(n)}}})}});class v{}Object.defineProperty(v,"parseVideoElements",{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.getElementsByTagName("video");for(let a=0;a<n.length;a+=1)v.replaceVideoElement(n[a],a,t)}}),Object.defineProperty(v,"replaceVideoElement",{enumerable:!0,writable:!0,value:(e,t,n)=>{let a=e.getAttribute("poster");a=a?v.handleUrl(n,a):"";const o=e.getElementsByTagName("source")[0]?e.getElementsByTagName("source")[0].src:"";e.setAttribute("videoUrl",o),e.removeAttribute("controls"),e.setAttribute("posterUrl",a),e.classList.add("customVideoElement"),e.style.cursor="pointer"}}),Object.defineProperty(v,"addEventsOnVideo",{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.contentWindow.document,a=n.querySelectorAll(".customVideoElement");for(let o=0;o<a.length;o+=1)a[o].addEventListener("click",function(){const e=this.getAttribute("videourl"),a=this.getAttribute("posterUrl");if(e){const o=this.getAttribute("title")?this.getAttribute("title"):n.title?n.title:"EPUB Video",i=m.frameVideoObject(e,a,o);t(i)}})}}),Object.defineProperty(v,"computeVideoSource",{enumerable:!0,writable:!0,value:(e,t)=>{const n=[],a=e.split("/");a.pop();const o=t.split("/");o.forEach((e)=>{".."===e?a.pop():n.push(e)});const i=a.concat(n);return i.join("/")}}),Object.defineProperty(v,"handleUrl",{enumerable:!0,writable:!0,value:(e,t)=>-1<t.indexOf("..")||-1===t.indexOf("http")||-1===t.indexOf("https")?v.computeVideoSource(e,t):t});class w{}Object.defineProperty(w,"setFrameFontLevel",{enumerable:!0,writable:!0,value:(e,t)=>{t&&(t.style.fontSize=`${e}%`)}});class P{}Object.defineProperty(P,"setFrameTheme",{enumerable:!0,writable:!0,value:(e,t)=>{let n=t.getElementsByClassName("readerplus_highlight");for(let a=0;a<n.length;a+=1){const e=n[a].style.backgroundColor;n[a].setAttribute("tempHColor",e)}const a=t.style.fontSize,o=t.style.fontFamily,i=t.style.textTransform,r=t.style.lineHeight;t.className=`${e}-reader-themes`,t.style.fontSize=a||"",t.style.fontFamily=o||"",t.style.textTransform=i||"none",t.style.lineHeight=r||"",n=t.getElementsByClassName("readerplus_highlight");for(let a=0;a<n.length;a+=1)n[a].setAttribute("style",`background-color:${n[a].getAttribute("tempHColor")} !important`),n[a].removeAttribute("tempHColor")}});class S{}Object.defineProperty(S,"prepareEpubContent",{enumerable:!0,writable:!0,value:(e,t,n,a,o)=>{const i=S.getParsedHtml(e),r=o.epubOptions,l=o.metadata.epubUserPreference;S.addLinkTag(i,r.style),S.addBaseTag(i,t),S.addSelectionStyle(i.head);const d=i.getElementsByTagName("body")[0];return S.applyScaleTransform(d,null,n),S.parseAudioVideo(d,t),S.applyTheme(d,a,l),S.applyFontLevel(d,a,l),i.documentElement.innerHTML}}),Object.defineProperty(S,"parseAudioVideo",{enumerable:!0,writable:!0,value:(e,t)=>{y.parseAudioElements(e,t),v.parseVideoElements(e,t)}}),Object.defineProperty(S,"addBaseTag",{enumerable:!0,writable:!0,value:(e,t)=>{const n=document.createElement("base");n.href=t;const a=e.getElementsByTagName("head")[0];a&&a.insertBefore(n,a.firstChild)}}),Object.defineProperty(S,"addLinkTag",{enumerable:!0,writable:!0,value:(e,t)=>{const n=document.createElement("link");n.href=t,n.rel="stylesheet",n.type="text/css";const a=e.getElementsByTagName("head")[0];a&&a.insertBefore(n,a.firstChild)}}),Object.defineProperty(S,"getParsedHtml",{enumerable:!0,writable:!0,value:(e)=>{const t=new DOMParser,n=t.parseFromString(e,"text/xml");return n}}),Object.defineProperty(S,"getBaseUrl",{enumerable:!0,writable:!0,value:(e,t,n)=>{let a,o;if(e){const i=e.findIndex((e)=>e.id===t);-1!==i&&(a=e[i].uri),n&&e[i+1]&&(o=e[i+1].uri)}return{baseUrl:a,baseUrl2:o}}}),Object.defineProperty(S,"getSelectionLocation",{enumerable:!0,writable:!0,value:(e,t)=>({top:e.screenY-50,left:t?e.screenX:e.pageX})}),Object.defineProperty(S,"applyScaleTransform",{enumerable:!0,writable:!0,value:(e,t,n)=>{const a=n||1,o=t||1;let i;e&&(i=e.style,i.transform="",i.transform=`scale(${o*a})`,i.WebkitTransform=`scale(${o*a})`,i.MozTransform=`scale(${o*a})`,i.msTransform=`scale(${o*a})`,i.transformOrigin="0 0",i.msTransformOrigin="0 0",i.WebkitTransformOrigin="0 0",i.MozTransformOrigin="0 0")}}),Object.defineProperty(S,"getScaleRatio",{enumerable:!0,writable:!0,value:(e,t,n,a,o="0",i=!1,r=!1,l=!1)=>{const d=e,s=t;let u,p,g,c,h,m=1;const b=i?70:0,f=l?61:50,y=window.innerHeight-f,v=window.innerWidth;n?(u=y-b,p=r&&0<=o?(window.innerWidth-parseInt(o))/2:r&&0>o?window.innerWidth/2:(v-parseInt(o))/2):(u=y-b,p=r&&0<=o?window.innerWidth-parseInt(o):r&&0>o?window.innerWidth:v-parseInt(o));const w=parseInt(d)/parseInt(s),P=parseInt(s)/parseInt(d);return s>d?(parseInt(u)<parseInt(d)&&(m=u/d,c=d*m,g=s*m,parseInt(p)<g&&(h=parseInt(p)/g,g*=h,c=g*w,m=c/parseInt(d))),parseInt(p)<parseInt(s)&&(m=p/s,g=s*m,c=d*m,parseInt(u)<c&&(h=parseInt(u)/c,c*=h,g=c*P,m=g/parseInt(s)))):(parseInt(p)<parseInt(s)&&(m=p/s,g=s*m,c=d*m,parseInt(u)<c&&(h=parseInt(u)/c,c*=h,g=c*P,m=g/parseInt(s))),parseInt(u)<parseInt(d)&&(m=u/d,c=d*m,g=s*m,parseInt(p)<g&&(h=parseInt(p)/g,n?g*=h:g+=h,c=g*w,m=c/parseInt(d)))),+`${Math.round(`${m}e3`)}e-3`}}),Object.defineProperty(S,"scaleIframe",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i=!1,r=!1)=>{var l=Math.floor;const d=e;d.style.width=`${l(a*t*o)}px`,d.style.height=`${l(n*t*o)}px`;let s=window.innerHeight;parseFloat(d.style.height.split("px")[0],10)<s?(s-=i?61:r?120:50,d.parentElement.style.height=`${s}px`):d.parentElement.style.height=d.style.height,S.applyScaleTransform(d.contentWindow.document.body,t,o)}}),Object.defineProperty(S,"removeScroll",{enumerable:!0,writable:!0,value:(e)=>{const t=e;t&&(t.style.overflowX="hidden",t.style.overflowY="hidden")}}),Object.defineProperty(S,"addSelectionStyle",{enumerable:!0,writable:!0,value:(e)=>{const t=document.createElement("style"),n=document.createTextNode(`::selection{background-color:rgba(121,231,255,0.3)}
    .White-reader-themes .searchHighlight,
    .Akaroa-reader-themes .searchHighlight{background-color: #D5D5D5; border-bottom: 2px solid #000;}
    .Black-reader-themes .searchHighlight{
      background-color: rgba(255, 255, 255, 0.2); border-bottom: 2px solid #eee; 
    }`);t.type="text/css",t&&t.appendChild(n),e&&e.appendChild(t)}}),Object.defineProperty(S,"handleFixedLayoutContent",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i,r,l,d,s)=>{const u=S.getScaleRatio(t,n,r,l,"0",s,!1,d),p=S.getParsedHtml(a);return p&&S.addBaseTag(p,o),p&&S.addSelectionStyle(p.head),p.body&&S.applyScaleTransform(p.body,u,i),p.body&&S.parseAudioVideo(p.body,o),S.scaleIframe(e,u,t,n,i,d,s),p.body&&S.removeScroll(p.body),p.documentElement.innerHTML}}),Object.defineProperty(S,"loadIframeContent",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i,r,l,d,s,u,p,g)=>{const c=o.replace("private","public");let h=i?S.handleFixedLayoutContent(e,t,n,a,c,r,l,s,p,g):S.prepareEpubContent(a,c,r,d,u);const m=e&&e.contentWindow&&e.contentWindow.document;m&&m.open(),m&&m.write(h),m&&m.close()}}),Object.defineProperty(S,"addEventsOnAudio",{enumerable:!0,writable:!0,value:(e,t)=>{y.addEventsOnAudio(e,t)}}),Object.defineProperty(S,"addEventsOnVideo",{enumerable:!0,writable:!0,value:(e,t)=>{v.addEventsOnVideo(e,t)}}),Object.defineProperty(S,"getMappedHighlight",{enumerable:!0,writable:!0,value:(e,t,n)=>{let a=t&&t.find((t)=>t.noteId==e);return!a&&n&&(a=n.find((t)=>t.noteId==e)),a}}),Object.defineProperty(S,"getPageById",{enumerable:!0,writable:!0,value:(e,t)=>{const n=t.find((t)=>t.id===e);return n||null}}),Object.defineProperty(S,"getNextPage",{enumerable:!0,writable:!0,value:(e,t)=>{const n=t.findIndex((t)=>t.id==e),a=t[n+1];return a||null}}),Object.defineProperty(S,"applyFontLevel",{enumerable:!0,writable:!0,value:(e,t,n)=>{n.sliderVal&&w.setFrameFontLevel(n.sliderVal,e)}}),Object.defineProperty(S,"applyTheme",{enumerable:!0,writable:!0,value:(e,t,n)=>{n.theme&&P.setFrameTheme(n.theme,e)}});var A=n(4);class C{}Object.defineProperty(C,"setFrameFontFamily",{enumerable:!0,writable:!0,value:(e,t)=>{if(t){const n="default"===e?"":A.c[e];t.style.fontFamily=n}}});class E{}Object.defineProperty(E,"setFrameLineSpace",{enumerable:!0,writable:!0,value:(e,t)=>{if(t){let n="";"wide"===e?n="2.75em":"wider"===e&&(n="3.5em"),t.style.lineHeight=n}}});class F{}Object.defineProperty(F,"parseLinksOnPage",{enumerable:!0,writable:!0,value:(e,t,n,a,o)=>{const r=e.contentWindow.document.querySelectorAll("a"),i=e.contentWindow.document.getElementsByTagName("base"),l=i&&0<i.length&&i[0].href;for(let d=0;d<r.length;d+=1){const i=F.isInternalLink(r[d]),s=F.isAudioLink(r[d]),u=F.isVideoLink(r[d]),p=e.contentWindow.document,g=r[d].getAttribute("data-title")?r[d].getAttribute("data-title"):p.title?p.title:"EPUB Audio";F.addCallback(r[d],s,u,i,t,l,n,a,o,g)}}}),Object.defineProperty(F,"isInternalLink",{enumerable:!0,writable:!0,value:(e)=>{const t=e.getAttribute("href"),n=t?t.search("://"):0;return!(-1!==n)}}),Object.defineProperty(F,"isAudioLink",{enumerable:!0,writable:!0,value:(e)=>{const t=e.getAttribute("href");return t&&(-1<t.indexOf(".mp3")||-1<t.indexOf(".wav"))}}),Object.defineProperty(F,"isVideoLink",{enumerable:!0,writable:!0,value:(e)=>{const t=e.getAttribute("href");return t&&(-1<t.indexOf(".mp4")||-1<t.indexOf(".avi"))}}),Object.defineProperty(F,"addCallback",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i,r,l,d,s)=>{const u="file:"===window.location.protocol,p=e,g=p.getAttribute("href"),c=F.checkScormLinks(g);a||t||n||u||c?g&&(p.onclick=(e)=>{e.preventDefault(),r(g,t,n,a,o,l,i,d,s)}):p.setAttribute("target","_blank")}}),Object.defineProperty(F,"checkScormLinks",{enumerable:!0,writable:!0,value:(e)=>{let t=!1,n=e;return e?(-1<e.indexOf("//")&&(n=e.split("//")[1]),n.substring(0,A.o.length)===A.o&&(t=!0),t):t}});class I{}Object.defineProperty(I,"handleLinkClick",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i,r,l,d)=>{const s=a?m.computeRelativeSource(r,e):e;if(t||n){const e=t?m.frameAudioObject(s,d):m.frameVideoObject(s,"");l(e)}else{let t=e.split("#")[0];t=t.replace("../",""),t=t.replace("./","");const n=e.split("#")[1],a=""===t?"":I.getInternalPageId(t,o),r=F.checkScormLinks(e);a||r?i(a,n,r,e):window.open(s)}}}),Object.defineProperty(I,"getInternalPageId",{enumerable:!0,writable:!0,value:(e,t)=>{const n=t.find((t)=>-1<t.uri.indexOf(e));return n?n.id:null}}),Object.defineProperty(I,"handlePageHash",{enumerable:!0,writable:!0,value:(e,t)=>{const n=e.contentWindow.location;n&&(n.hash="*",n.hash=t)}});class x{}Object.defineProperty(x,"setFrameTextTransform",{enumerable:!0,writable:!0,value:(e,t)=>{t&&(t.style.textTransform="default"===e?"":"uppercase")}});var L=n(6);class k{}Object.defineProperty(k,"setFrameZoomLevel",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i,r,l="0",d=!1,s=!1,u=!1)=>{let p=e&&1<=e?e:1;if(n){const e=S.getScaleRatio(a,o,i,r,l,d,s,u);p*=e,document.body.style.background="#c7c7c7";const n=document.querySelector("#root");n&&(n.style.background="#c7c7c7"),k.zoomIframe(p,t,a,o,l,u,d)}for(let g=0;g<t.length;g+=1)t[g].contentWindow&&S.applyScaleTransform(t[g].contentWindow.document.body,p)}}),Object.defineProperty(k,"zoomIframe",{enumerable:!0,writable:!0,value:(e,t,n,a,o="0",r=!1,l=!1)=>{for(let d=0;d<t.length;d+=1){t[d].style.width=`${a*e}px`,t[d].style.height=`${n*e}px`;let o=window.innerHeight;parseFloat(t[d].style.height.split("px")[0],10)<o?(o-=r?111:l?120:50,t[d].parentElement.style.height=`${o}px`):t[d].parentElement.style.height=t[d].style.height}const i=t.length*a*e,d=i>window.innerWidth?i:window.innerWidth,s=document.querySelector(".EpubViewerDoublePage"),u=0<=parseInt(o,10)?parseInt(o,10):0;if(s){const e=`${d-u}px`;document.querySelector(".EpubViewerDoublePage").style.width=e}}});var V=n(3),T=n(62),O=n.n(T);class D extends a.Component{constructor(e){super(e),B.call(this),this.frameArray=[],this.neededFrame=null,this.newlyCreatedHighlightId=null,this.viewerRef=o.a.createRef(),this.state={pageLoading:!0,showAnnotation:e.showAnnotation};const t=e.isYoungLearnerActive;this.style={position:"absolute",width:"auto",minWidth:"100%",height:t?"100%":`${window.innerHeight-50}px`,top:t?"0px":"50px",border:"none"}}componentWillReceiveProps(e){var t=this.props;const n=t.isDoublePage,a=t.isFixedLayout,o=t.theme,i=t.handleAnnotationsTheme,r=e.isFocOpen,l=e.isYoungLearnerActive,d=e.theme;if(!n&&!a){const e=document.querySelector(".bookFrame");if(r)document.querySelector(".EpubViewer").style.height=`${e.contentWindow.document.body.scrollHeight}px`;else{const e=l?"100%":`${window.innerHeight-50}px`;document.querySelector(".EpubViewer").style.height=e}}o.activeColor!==d.activeColor&&i(d.activeColor)}componentDidMount(){var e=this.props;const t=e.content,n=e.currentPageId,a=e.isDoublePage,o=e.isFixedLayout,i=e.nextContent,r=e.pagePlayList,l=e.zoomValue;this.bookType=A.v,this.annotationInterface=new h.a(this),this.props.setAnnotationInterface(this.annotationInterface),this.updateFrameContent(r,n,t,i,a,l),window.addEventListener("message",this.handleMessage),o&&window.addEventListener("resize",this.scaleAllFrames)}componentDidUpdate(e){var t=this.props;const n=t.content,a=t.currentPageId,o=t.isDoublePage,i=t.nextContent,r=t.pagePlayList,l=t.zoomValue;e.isDoublePage!==o&&this.updateFrameContent(r,a,n,i,o,l)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage),window.removeEventListener("resize",this.scaleAllFrames),this.firstFrame.contentDocument.removeEventListener("click",this.identifyFrame),this.secondFrame&&this.secondFrame.contentDocument.removeEventListener("click",this.identifyFrame),window.sessionStorage.removeItem("focPageNo"),this.props.destroyAnnotation()}render(){const e=this.context.learningContext.features;var t=this.props;const n=t.annDataClient,o=t.currentPageId,i=t.getInternalId,r=t.getServerId,l=t.storeServerId,s=t.handleAnnotation,u=t.handleAnnotationSearch,p=t.handleCreateEditCard,g=t.isYoungLearnerActive,c=t.locale,h=t.childComponents,m=t.theme,b=this.state.showAnnotation;let f="vega-epub";return f=g?`${f} young-learner`:f,Object(a.createElement)("div",{className:f},e.enableAnnotationWidget&&Object(a.createElement)(d.AnnotationComponent,{onChange:s,onAnnotationSearch:u,onCreateEditCard:p,showAnnotation:b,showLabel:e&&e.showAnnotationLabel,showShare:e&&e.showShare,showHighlights:e&&e.showHighlights,showFlashcard:e&&e.showFlashcard,showSearch:e&&e.showSearch,showDictionary:e&&e.showDictionary,showSocialPost:e&&e.showSocialPost,showAudio:e&&e.showAudio,showCustomizeMenu:e&&e.showCustomizeMenu,theme:e&&e.theme,masterTheme:e&&e.masterTheme,annotationClient:n,pageId:o,getInternalId:i,getServerId:r,storeServerId:l,locale:c,childComponents:h}),Object(a.createElement)("div",{className:`epubViewerBody ${m}`,ref:this.viewerRef},this.state.pageLoading&&this.renderLoadingOverlay(),this.renderBookFrame()))}}var B=function(){Object.defineProperty(this,"shouldComponentUpdate",{enumerable:!0,writable:!0,value:(e,t)=>{if((e.currentPageId!==this.props.currentPageId||e.content!==this.props.content||e.nextContent!==this.props.nextContent)&&this.updateFrameContent(e.pagePlayList,e.currentPageId,e.content,e.nextContent,e.isDoublePage,e.zoomValue),e.isDoublePage!==this.props.isDoublePage)return!0;const n=this.props.isDoublePage?this.EpubViewerDoublePage:this.EpubViewer;if(e.zoomValue!==this.props.zoomValue)k.setFrameZoomLevel(e.zoomValue,this.frameArray,this.props.isFixedLayout,this.props.layoutDimensions.height,this.props.layoutDimensions.width,e.isDoublePage,n,"0",e.isBottomNavigation);else if(this.props.isFixedLayout&&this.props.isDrawerOpen!==e.isDrawerOpen&&1>=e.zoomValue){const t=e.isDrawerOpen?e.leftPanelWidth:A.f;k.setFrameZoomLevel(e.zoomValue,this.frameArray,this.props.isFixedLayout,this.props.layoutDimensions.height,this.props.layoutDimensions.width,e.isDoublePage,n,t,e.isBottomNavigation)}if(this.firstFrame&&this.firstFrame.contentWindow){const t=this.firstFrame.contentWindow.document.body;e.fontSize===this.props.fontSize||this.props.isFixedLayout||w.setFrameFontLevel(e.fontSize,t),e.theme===this.props.theme||this.props.isFixedLayout||(P.setFrameTheme(e.theme,t),this.viewerRef.current.className=`epubViewerBody ${e.theme}`)}const a=this.frameArray;for(let n=0;n<a.length;n+=1)if(a[n].contentWindow){const t=a[n].contentWindow.document.body;e.fontSelector!==this.props.fontSelector&&C.setFrameFontFamily(e.fontSelector,t),e.textTransform!==this.props.textTransform&&x.setFrameTextTransform(e.textTransform,t),e.lineSpacing!==this.props.lineSpacing&&E.setFrameLineSpace(e.lineSpacing,t)}return this.state.pageLoading!==t.pageLoading||this.state.showAnnotation!==t.showAnnotation}}),Object.defineProperty(this,"checkFrameLoaded",{enumerable:!0,writable:!0,value:(e)=>{const t="bookFrame2"===e?this.secondFrame:this.firstFrame;var n=this.props;const a=n.handleMedia,o=n.pagePlayList;t&&t.contentDocument.body&&("bookFrame2"===e?clearInterval(this.handleSecondFrameLoaded):clearInterval(this.handleFirstFrameLoaded),F.parseLinksOnPage(t,o,I.handleLinkClick,this.handleInternalPageClick,a),S.addEventsOnAudio(t,a),S.addEventsOnVideo(t,a))}}),Object.defineProperty(this,"createHighlight",{enumerable:!0,writable:!0,value:(e)=>{var t=this.props;const n=t.bookId,a=t.currentPageId,o=t.highlightUtilities,i=t.isDoublePage,r=t.pagePlayList;let l=S.getPageById(a,r),d=a,s=document.querySelector(".bookFrame"),u=!1;const p=e.color,c=L.a.getLineColor(p),h=L.a.hexToRGB(p,A.a),m=this.context.learningContext.titleData;i&&(s=this.neededFrame),this.neededFrame===this.secondFrame&&(u=!0,l=S.getNextPage(a,r),d=l.id);const b=o.highlightSelectedText(h,s,e.id,c),f=b.selection||"",y=m.chapterTitle||m.pageTitle||s.contentWindow.document.title||"";e.annotationType="Highlight",e.lineColor=c,e.pageId=d,e.pageNo=parseInt(l.index+1,10).toString(),e.rect=b.rect,e.rgbColor=h,e.highlight.selectedText=f,e.selectedText=f,e.title=y;const v=this.annotationInterface.getChapterDetails(l.id);e.contextualInfo={chapterId:v[0]?v[0].chapterId:"",chapterTitle:v[0]?v[0].chapterTitle:m.chapterTitle||"",title:y||""},e.chapter={contextualInfo:e.contextualInfo,pageTitle:y},e.highlight.content.push({type:"text",content:{text:f,title:y}}),e.highlight.ranges.push({title:b.serializedHighlight}),e.quote=f,e.data={bookType:A.v,ranges:b.serializedHighlight,title:y||""},g.EventProvider.getEventManager().dispatch({event:"VegaReader Event",category:"Highlight",action:"Created",data:{book_title:s.contentWindow.document.title,book_id:n,page_index:a}}),u?(this.annotationInterface.annotationStoreSecondPage.unshift(e),this.annotationInterface.restoreEpubHighlights(this.annotationInterface.annotationStoreSecondPage,s)):(this.annotationInterface.annotationStoreFirstPage.unshift(e),this.annotationInterface.restoreEpubHighlights(this.annotationInterface.annotationStoreFirstPage,s))}}),Object.defineProperty(this,"handleInternalPageClick",{enumerable:!0,writable:!0,value:(e,t,n,a)=>{var o=this.props;const i=o.currentPageId,r=o.onPageLoad,l=this.context.learningContext.features;n?l.onScormLinkClick(a):i===e||""===e?I.handlePageHash(this.firstFrame,t):r(e)}}),Object.defineProperty(this,"handleLoadingOverlayOnZoom",{enumerable:!0,writable:!0,value:()=>{var e=this.props;const t=e.isBottomNavigation,n=e.isDoublePage,a=e.isFixedLayout,o=e.isYoungLearnerActive,i=e.layoutDimensions,r=e.zoomValue;if(a&&this.state.pageLoading){const e=r||1;let a=e&&1<=e?e:1;const l=n?this.EpubViewerDoublePage:this.EpubViewer,d=S.getScaleRatio(i.height,i.width,n,l,"0",t,!1,o);a*=d,document.getElementById("loadingOverlay").style.height=`${i.height*a}px`}}}),Object.defineProperty(this,"handleMessage",{enumerable:!0,writable:!0,value:(e)=>{if(e.origin===window.location.origin&&"string"==typeof e.data){let t=null;try{t=JSON.parse(e.data)}catch(n){t=e.data}t.sender===A.t&&p.a.publish(t.type,t.data)}}}),Object.defineProperty(this,"handleFontsImport",{enumerable:!0,writable:!0,value:(e)=>{const t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family=Source+Sans+Pro",e.appendChild(t)}}),Object.defineProperty(this,"handleDisplayStyle",{enumerable:!0,writable:!0,value:()=>{const e=this.frameArray;var t=this.props;const n=t.fontSelector,a=t.textTransform,o=t.lineSpacing;for(let t=0;t<e.length;t+=1)if(e[t].contentWindow){const i=e[t].contentWindow.document.body;n&&C.setFrameFontFamily(n,i),a&&x.setFrameTextTransform(a,i),o&&E.setFrameLineSpace(o,i)}}}),Object.defineProperty(this,"handlePageLoad",{enumerable:!0,writable:!0,value:(e)=>{var t=this.props;const n=t.currentPageId,a=t.fetchAnnotation,o=t.highlightUtilities.initializeRangy,i=t.pagePlayList,r=t.popupCloser;this.frameArray=this.secondFrame?[this.firstFrame,this.secondFrame]:[this.firstFrame];const l=e.target;if(this.handleFontsImport(l.contentDocument.head),l.contentDocument.body){if(l.contentDocument.addEventListener("mouseup",this.handleTextSelection.bind(l)),r&&l.contentDocument.addEventListener("click",r.bind(e)),o(l),l===this.firstFrame)this.firstFrameId=n,a(n);else{const e=S.getNextPage(n,i);e&&(this.secondFrameId=e.id,a(e.id))}const t=1<this.frameArray.length?this.frameArray.length:"",d=S.getPageById(n,i),s=i[i.length-1].index;(`bookFrame${t}`===e.target.id||d.index==s)&&this.setState({pageLoading:!1}),p.a.publish("epub-page-loaded","pageloaded")}this.handleDisplayStyle()}}),Object.defineProperty(this,"handleTextSelection",{enumerable:!0,writable:!0,value:(e)=>{const t=e.srcElement.ownerDocument,n=t.getSelection(),a=t.defaultView?t.defaultView.frameElement:this.firstFrame;var o=this.props;const i=o.isDoublePage,r=o.isDrawerOpen,l=S.getSelectionLocation(e,i);i||(l.left+=r?A.h:A.g);const d=this.context.learningContext.features,s=d.annotationDisabled;if(""!==n.toString().trim()&&!s)p.a.publish("user-finished-selection",l);else{const e="bookFrame2"===a.id?"secondary":"primary";p.a.publish("play_selected_pars",{pageType:e,selection:n}),this.setState({showAnnotation:!this.state.showAnnotation}),document.body.click()}}}),Object.defineProperty(this,"identifyFrame",{enumerable:!0,writable:!0,value:(e)=>{this.neededFrame=e}}),Object.defineProperty(this,"loadHighlights",{enumerable:!0,writable:!0,value:(e)=>{const t=e[0].pageId!==this.firstFrameId||this.firstFrameId===this.secondFrameId?this.secondFrame:this.firstFrame;t&&"bookFrame2"===t.id?this.annotationInterface.annotationStoreSecondPage=e:this.annotationInterface.annotationStoreFirstPage=e,this.annotationInterface.restoreEpubHighlights(e,t)}}),Object.defineProperty(this,"renderBookFrame",{enumerable:!0,writable:!0,value:()=>{var e=this.props;const t=e.currentPageId,n=e.isDoublePage,o=e.isFixedLayout,i=e.layoutDimensions,r=e.pagePlayList;if(o){if(n){let e="bookFrame";return i.rightStart&&r[0].id===t&&(e+=" rightStart"),Object(a.createElement)("div",{className:"EpubViewerDoublePage",style:this.style,ref:(e)=>{this.EpubViewerDoublePage=e}},Object(a.createElement)("div",{className:"firstFrame"},Object(a.createElement)("iframe",{ref:(e)=>{this.firstFrame=e},className:e,allowFullScreen:!0,title:"vega-epub-frame",id:"bookFrame1",onLoad:this.handlePageLoad})),Object(a.createElement)("div",{className:"secondFrame"},Object(a.createElement)("iframe",{ref:(e)=>{this.secondFrame=e},className:"bookFrame",allowFullScreen:!0,title:"vega-epub-frame",id:"bookFrame2",onLoad:this.handlePageLoad})))}return Object(a.createElement)("div",{className:"EpubViewer EpubViewerSinglePage",style:this.style,ref:(e)=>{this.EpubViewer=e}},Object(a.createElement)("iframe",{ref:(e)=>{this.firstFrame=e},className:"bookFrame",allowFullScreen:!0,title:"vega-epub-frame",id:"bookFrame",onLoad:this.handlePageLoad}))}return Object(a.createElement)("div",{className:"EpubViewer vega-epub-reflowable",style:this.style},Object(a.createElement)("iframe",{ref:(e)=>{this.firstFrame=e},className:"bookFrame",allowFullScreen:!0,title:"vega-epub-frame",id:"bookFrame",onLoad:this.handlePageLoad}))}}),Object.defineProperty(this,"renderLoadingOverlay",{enumerable:!0,writable:!0,value:()=>Object(a.createElement)("div",null,Object(a.createElement)("div",{id:"loadingOverlay"}),Object(a.createElement)("div",{id:"loading-spinner"}))}),Object.defineProperty(this,"scaleAllFrames",{enumerable:!0,writable:!0,value:()=>{var e=this.props;const t=e.isBottomNavigation,n=e.isDoublePage,a=e.isDrawerOpen,o=e.isFixedLayout,i=e.isYoungLearnerActive,r=e.layoutDimensions,l=e.leftPanelWidth,d=e.zoomValue,s=n?this.EpubViewerDoublePage:this.EpubViewer;let u=a?l:A.f;u=i?"0":u,k.setFrameZoomLevel(d||1,this.frameArray,o,r.height,r.width,n,s,u,t,!0,i)}}),Object.defineProperty(this,"updateFrameContent",{enumerable:!0,writable:!0,value:(e,t,n,a,o,i)=>{isNaN(i)||this.handleLoadingOverlayOnZoom();var r=this.props;const l=r.bookId,d=r.isBottomNavigation,s=r.isFixedLayout,u=r.isYoungLearnerActive,p=r.layoutDimensions,g=i||1,c=p.height,h=p.width,m=S.getBaseUrl(e,t,o),b=o?this.EpubViewerDoublePage:this.EpubViewer,f=this.context.learningContext;m.baseUrl&&this.firstFrame&&(this.handleFirstFrameLoaded=setInterval(this.checkFrameLoaded.bind(this,"bookFrame"),100),S.loadIframeContent(this.firstFrame,c,h,n,m.baseUrl,s,g,o,l,b,f,u,d),a&&o&&(this.handleSecondFrameLoaded=setInterval(this.checkFrameLoaded.bind(this,"bookFrame2"),100),S.loadIframeContent(this.secondFrame,c,h,a,m.baseUrl2,s,g,o,l,b,f,u,d))),this.firstFrame.contentDocument.addEventListener("click",this.identifyFrame.bind(this,this.firstFrame)),this.secondFrame&&this.secondFrame.contentDocument.addEventListener("click",this.identifyFrame.bind(this,this.secondFrame))}})};D.propTypes={annDataClient:r.a.object,bookId:r.a.string,content:r.a.string.isRequired,currentPageId:r.a.string.isRequired,fetchAnnotation:r.a.func,fontSize:r.a.string,fontSelector:r.a.string,getInternalId:r.a.func,getServerId:r.a.func,storeServerId:r.a.func,handleAnnotation:r.a.func,handleMedia:r.a.func,highlightUtilities:r.a.func,isBottomNavigation:r.a.bool,isDoublePage:r.a.bool,isDrawerOpen:r.a.bool,isFixedLayout:r.a.bool,isFocOpen:r.a.bool,isYoungLearnerActive:r.a.bool,layoutDimensions:r.a.object,leftPanelWidth:r.a.string,lineSpacing:r.a.string,locale:r.a.string,nextContent:r.a.string,onPageLoad:r.a.func,pagePlayList:r.a.arrayOf(r.a.object),popupCloser:r.a.func,setAnnotationInterface:r.a.func,showAnnotation:r.a.bool,textTransform:r.a.string,theme:r.a.string,zoomValue:r.a.number,handleAnnotationSearch:r.a.func,handleCreateEditCard:r.a.func,childComponents:r.a.object,destroyAnnotation:r.a.func,handleAnnotationsTheme:r.a.func},D.defaultProps={locale:"en",showAnnotation:!0,isYoungLearnerActive:!1,layoutDimensions:{},lineSpacing:"",onPageLoad:()=>{},bookId:"",fontSelector:"",fontSize:"100",textTransform:"",theme:"White",destroyAnnotation:()=>{}},D.contextTypes={learningContext:r.a.shape(V.a).isRequired};var H=n(58);class M extends a.PureComponent{constructor(e){super(e),Object.defineProperty(this,"closePopup",{enumerable:!0,writable:!0,value:()=>{this.setState({isVideoModalShown:!1,isAudioModalShown:!1})}}),Object.defineProperty(this,"handleMedia",{enumerable:!0,writable:!0,value:(e)=>{if(e)switch(e.type){case"video":this.setState({isVideoModalShown:!0,isAudioModalShown:!1,videoObject:e});break;case"audio":this.setState({isAudioModalShown:!0,isVideoModalShown:!1,audioObject:e});break;default:}}}),Object.defineProperty(this,"render",{enumerable:!0,writable:!0,value:()=>{var e=this.props;const t=e.annDataClient,n=e.bookId,o=e.content,i=e.currentPageId,r=e.highlightUtilities,d=e.fetchAnnotation,s=e.getInternalId,u=e.getServerId,p=e.handleAnnotation,g=e.handleAnnotationSearch,c=e.handleCreateEditCard,h=e.isDoublePage,m=e.isFixedLayout,b=e.isFocOpen,f=e.layoutDimensions,y=e.locale,v=e.nextContent,w=e.onPageLoad,P=e.pagePlayList,S=e.popupCloser,A=e.productId,C=e.setAnnotationInterface,E=e.showAnnotation,F=e.storeServerId,I=e.childComponents;var x=this.context.learningContext,L=x.epubOptions;const k=L.isBottomNavigation,V=L.isDrawerOpen,T=L.leftPanelWidth;var O=x.metadata;const B=O.epubUserPreference,M=O.isYoungLearnerActive;return Object(a.createElement)("div",{className:"EpubViewerContainer"},Object(a.createElement)(D,{annDataClient:t,bookId:n,bookType:"EPUB",content:o,currentPageId:i,highlightUtilities:r,fetchAnnotation:d,fontSelector:B.fontSelector,fontSize:B.sliderVal,getInternalId:s,getServerId:u,handleAnnotation:p,handleAnnotationSearch:g,handleCreateEditCard:c,handleMedia:this.handleMedia,isBottomNavigation:k,isDoublePage:h,isDrawerOpen:V,isFixedLayout:m,isFocOpen:b,isYoungLearnerActive:M,layoutDimensions:f,leftPanelWidth:T,lineSpacing:B.lineSpacing,locale:y,nextContent:v,onPageLoad:w,pagePlayList:P,popupCloser:S,productId:A,setAnnotationInterface:C,showAnnotation:E,storeServerId:F,textTransform:B.textTransform,theme:B.theme,zoomValue:B.zoom,childComponents:I}),Object(a.createElement)(H.a,{bookId:n,bookType:"EPUB",isVideoModalShown:this.state.isVideoModalShown,onClose:this.closePopup,videoObject:this.state.videoObject}),Object(a.createElement)(l.a,{audioObject:this.state.audioObject,bookId:n,bookType:"EPUB",isAudioModalShown:this.state.isAudioModalShown,isYoungLearnerActive:M,onClose:this.closePopup}))}}),this.state={isAudioModalShown:!1,isVideoModalShown:!1,videoObject:{}}}componentWillReceiveProps(e){this.handleMedia(e.mediaObj)}componentDidMount(){this.handleMedia(this.props.mediaObj)}}t["default"]=M,M.propTypes={annDataClient:r.a.object,bookId:r.a.string,content:r.a.string.isRequired,currentPageId:r.a.string.isRequired,getInternalId:r.a.func,getServerId:r.a.func,highlightUtilities:r.a.func,fetchAnnotation:r.a.func,handleAnnotation:r.a.func,isDoublePage:r.a.bool,isFixedLayout:r.a.bool,isFocOpen:r.a.bool,layoutDimensions:r.a.object,locale:r.a.string,mediaObj:r.a.object,nextContent:r.a.string,onPageLoad:r.a.func,pagePlayList:r.a.arrayOf(r.a.object),popupCloser:r.a.func,productId:r.a.string,setAnnotationInterface:r.a.func,showAnnotation:r.a.bool,storeServerId:r.a.func,handleAnnotationSearch:r.a.func,handleCreateEditCard:r.a.func,childComponents:r.a.object},M.defaultProps={annDataClient:{},bookId:"",getInternalId:()=>{},getServerId:()=>{},highlightUtilities:()=>{},fetchAnnotation:()=>{},handleAnnotation:()=>{},handleAnnotationSearch:()=>{},handleCreateEditCard:()=>{},isDoublePage:!1,isFixedLayout:!1,isFocOpen:!1,layoutDimensions:{},locale:"",mediaObj:{},nextContent:"",onPageLoad:()=>{},pagePlayList:[],popupCloser:()=>{},productId:"",setAnnotationInterface:()=>{},showAnnotation:!1,storeServerId:()=>{},childComponents:{}},M.contextTypes={learningContext:r.a.shape(V.a).isRequired}}});
//# sourceMappingURL=1.5e47735c725c6735a8f0.chunk.js.map